(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2148],{22412:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login-with-email",function(){return n(58867)}])},58867:function(e,t,n){"use strict";n.r(t);var r=n(85893);n(67294);var o=n(19025),a=n(9460),i=n(77662),s=n(79045);t.default=(0,i.Z)(function(e){let{params:t}=e;return(0,r.jsx)(a.Z,{pageTitle:"Login",children:(0,r.jsx)(o.Z,{route:{params:t,callback:()=>{s.Z.emit("Navigation Push",{name:"Explore",params:{}})}}})})},"LoginWithEmail")},19025:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var r=n(85893),o=n(67294),a=n(72215),i=n(91960),s=n(71567),l=n(69180),u=n(96761),d=n(79045),g=n(95564),c=n(37548),f=n(39945),m=n(19738),x=n(98932),Z=n(34507),h=n(34887),p=n(45033),E=n(87529),w=n(15372),y=n(86393);let v=n(82463).Z.create({title:{...y.ZP.fonts.headerXL,alignSelf:"flex-start",marginBottom:y.ZP.margin.xs},rows:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignSelf:"stretch"},inputLeft:{marginRight:y.ZP.margin.xs/2,flex:1},inputRight:{marginLeft:y.ZP.margin.xs/2,flex:1},note:{alignSelf:"flex-start",marginTop:y.ZP.margin.xs,...y.ZP.fonts.md},errorLogin:{...y.ZP.fonts.md,color:y.ZP.colors.red}});var P=function(e){let{email:t,password:n,onUpdateEmail:a,onUpdatePassword:i,showErrors:s,emailErrors:l,passwordErrors:u,onLogin:d,onForgot:P,onSignUpWithEmail:b,authLoading:j,cartLoading:L,loginError:C,title:S}=e,_=(0,o.useRef)(null),{addToModalContext:T}=(0,x.Z)();return(0,o.useEffect)(()=>{T("LoadingModal",(0,r.jsx)(h.Z,{message:"Please wait a moment to be redirected to checkout page",display:L}))},[L]),(0,r.jsxs)(g.Z,{behavior:m.tq?"padding":"height",keyboardVerticalOffset:y.ZP.navHeader.height+20,style:y.W0.keyboardAvoidingViewBody,children:[(0,r.jsxs)(c.Z,{style:[y.W0.topContainerLeft,y.W0.topContainerMax],children:[!m.tq&&(0,r.jsx)(E.Z,{type:"h1",format:"titleSmallpage",style:y.W0.titleLeft,children:null!=S?S:"Log in"}),(0,r.jsx)(Z.Z,{label:"Email",value:t,returnKeyType:"next",keyboardType:"email-address",textContentType:"emailAddress",onChangeText:e=>a(e),onSubmitEditing:()=>{var e;null==_||null===(e=_.current)||void 0===e||e.focus()},showErrors:s,errors:l,autoFocus:!0}),(0,r.jsx)(Z.Z,{label:"Password",clarification:"(at least 8 characters)",value:n,returnKeyType:"next",textContentType:"password",onChangeText:e=>i(e),onSubmitEditing:d,showErrors:s,inputRef:_,errors:u,showPassEye:!0}),s?(0,r.jsx)(f.Z,{style:v.errorLogin,children:C&&(null==C?void 0:C.length)>0&&C}):null]}),(0,r.jsxs)(c.Z,{style:y.W0.bottomContainer,children:[(0,r.jsx)(w.Z,{title:"Log in",onPress:d,loading:j,disabled:s&&(l.length>0||u.length>0),flexButton:!0,dataCy:"btn-user-login"}),(0,r.jsx)(p.Z,{size:m.tq?"xs3":void 0}),(0,r.jsx)(w.Z,{title:"Forgot password?",onPress:P,disabled:j,color:"outline",flexButton:!0,dataCy:"btn-forgot-password"}),(0,r.jsx)(p.Z,{size:m.tq?"xs3":void 0}),(0,r.jsx)(w.Z,{title:"Donâ€™t have an account? Sign up",onPress:b,color:"outline",flexButton:!0,dataCy:"btn-not-a-member"}),(0,r.jsx)(p.Z,{size:"xl2"})]})]})},b=function(e){let{route:t}=e,{callback:n,title:g}=t.params||{},c=(0,a.TL)(),[f,x]=(0,o.useState)(!1),[Z,h]=(0,o.useState)([]),[p,E]=(0,o.useState)([]),[w,y]=(0,o.useState)(""),[v,b]=(0,o.useState)(""),{sendSegmentIdentify:j}=(0,s.Z)(),{loggingIn:L,error:C}=(0,a.CG)(e=>e.auth),{loading:S,error_message:_}=(0,a.CG)(e=>e.cart),T=async()=>{x(!0);let e=(0,l.oH)(w);e.length>0?(h(e),i.Z.sendError(e)):c((0,u.fZ)(w,v,n,j))},N=m.tq?"SignupEnterEmail":"NewAccount",k=async()=>{d.Z.emit("Navigation Navigate",{name:N,params:{step:"whatsYourEmail",callback:n}})};return(0,r.jsx)(P,{email:w,onUpdateEmail:e=>{if(y(e.toLowerCase()),f){let t=(0,l.oH)(e);h(t),i.Z.sendError(t)}},onUpdatePassword:e=>{if(b(e),f){let t=(0,l.uo)(e);E(t),i.Z.sendError(t)}},showErrors:f,emailErrors:Z,passwordErrors:p,loginError:C||_,authLoading:L,cartLoading:S,onLogin:T,onForgot:()=>{d.Z.emit("Navigation Navigate",{name:"LoginForgotPassword",params:{step:"enterEmail",email:w}})},onSignUpWithEmail:k,title:g})}},77662:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(85893),o=n(67294),a=n(49942);function i(e,t){return function(n){let{params:i}=function(e){let[t,n]=(0,o.useState)(a.Z.get(e));return(0,o.useEffect)(()=>{let t=e=>{n(e)};return a.Z.on(e,t),()=>{a.Z.remove(e,t)}},[e]),{params:t,setParams:t=>{a.Z.set(e,t)}}}(t);return(0,r.jsx)(e,{...n,params:i})}}}},function(e){e.O(0,[4738,6316,4484,848,4200,6064,4713,4671,5252,1114,3704,1201,3900,5328,2419,6294,3055,6431,9460,812,6118,7936,7698,9669,5653,3459,6606,9218,7998,412,5401,3690,1453,5732,7961,8380,2009,4049,1831,4256],function(){return e(e.s=22412)}),_N_E=e.O()}]);