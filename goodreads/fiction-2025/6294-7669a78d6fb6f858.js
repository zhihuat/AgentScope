"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6294],{90900:function(e,t,i){i.d(t,{GA:function(){return h},Pk:function(){return c},Wd:function(){return m},Z2:function(){return v},e7:function(){return u},gZ:function(){return b},iR:function(){return p},xY:function(){return f}});var o=i(67294),n=i(72215),l=i(43539),r=i(39149),s=i(89052),d=i(7861),a=i(71519);function u(){var e,t,i,o,s,d,a,u,c,v,m,p,b,f,h,g;let _=(0,n.CG)(e=>e.settings),S=(0,n.CG)(e=>e.user),E=null==_?void 0:null===(e=_.subscriptions)||void 0===e?void 0:e.find(e=>e.name===r.$d.REGULAR),C=null==_?void 0:null===(t=_.subscriptions)||void 0===t?void 0:t.find(e=>e.name===r.$d.TRIAL_1_MONTH),P=(null===(i=S.membership)||void 0===i?void 0:i.current_level)||"NON_MEMBER",L=_.membership_levels,y=null==L?void 0:L.find(e=>e.level_name===P),T=null==L?void 0:L.findIndex(e=>e.level_name===P),w=void 0===T?L[0]:L[T+1],Z=null==y?void 0:y.benefits,M=null==y?void 0:y.discount_percentage,x=null===(o=S.membership)||void 0===o?void 0:o.period_spent_amount,I=((null==w?void 0:w.required_spent_amount)-(null===(s=S.membership)||void 0===s?void 0:s.period_spent_amount)).toFixed(2),k=x/(null==w?void 0:w.required_spent_amount)*100,A=null==w?void 0:w.benefits,N=null==w?void 0:w.discount_percentage,R=null==w?void 0:w.required_spent_amount,F=null===(d=L[L.length-1])||void 0===d?void 0:d.discount_percentage,O=(0,l.IC)(null===(a=S.membership)||void 0===a?void 0:a.expiration_date),D=(R-Number(I)).toFixed(2),G=(null===(u=S.membership)||void 0===u?void 0:u.period_spent_amount)!==0?null===(c=S.membership)||void 0===c?void 0:c.period_spent_amount.toFixed(2):0,B=null===(v=S.membership)||void 0===v?void 0:v.trial_period,Y=(0,l.IC)(null===(m=S.membership)||void 0===m?void 0:m.subscription_date),j=(0,l.IC)(null===(p=S.membership)||void 0===p?void 0:p.expiration_date),U=(0,l.IC)(null===(b=S.membership)||void 0===b?void 0:b.period_start),H=null==_?void 0:null===(f=_.special_offer)||void 0===f?void 0:f.discount_percentage,V=(0,l.RA)(Number(null==E?void 0:E.price));function q(){return"$".concat(V)}function z(){return"".concat(q(),"/year")}return{membershipCurrentLevel:P,membershipLevels:L,currentLevelIndex:T,membershipExpirationFormatted:O,currentMembershipPendingSpend:D,isMembershipTopCategory:"TWO"===P,isMembershipLevelOne:"ONE"===P,shouldShowPercentageBar:"ONE"===P&&k<100,isBelletristSubscriber:[r.$d.BELLETRIST_MONTH,r.$d.BELLETRIST_YEAR].includes(null==S?void 0:null===(g=S.membership)||void 0===g?void 0:null===(h=g.add_ons)||void 0===h?void 0:h.type),currentMembershipLevel:y,currentMembershipBenefits:Z,currentMembershipLevelDiscount:M,currentMembershipPeriodPendingSpend:I,currentMembershipPercentageSpend:k,nextMembershipLevel:w,nextMembershipBenefits:A,nextMembershipLevelDiscount:N,nextMembershipRequiredSpentAmount:R,lastLevelDiscountPercentage:F,membershipPeriodSpentAmount:G,membershipTrialPediod:B,membershipSubscriptionDate:Y,membershipExpirationDate:j,membershipPeriodStartDate:U,memberOfferPercentage:H,membershipDiscountForProducts:M||N,getMembershipText:{regularText:function(){let{noCancel:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=null==C?void 0:C.period_description,i="Only ".concat(z()," after your ").concat(t);return e||(i+=". Cancel anytime"),i},onlyPrice:q(),pricePerYear:z(),memberCoOpDues:"Co-op member dues are ".concat(z(),"."),willRenewFor:"Your membership will renew for ".concat(z(),".")}}}let c=()=>{let e=(0,n.CG)(e=>e.user),{loggedIn:t,version:i,token:o}=(0,n.CG)(e=>e.auth),l=!0===t&&void 0!==t&&!!o;return o&&(0,s.i)(o),{loggedIn:t,isStoreStarted:"0.0.0"!==i,authenticated:l,token:o,user:e}},v=()=>{let e=(0,n.CG)(e=>e.user);return{userHasUsedTrial:e.has_used_trial,user:e}},m=()=>{let e=(0,n.CG)(e=>e.user);return{isAuthorUser:(0,l.Y6)(null==e?void 0:e.authorities,r.t3.Author)}},p=()=>{let e=(0,n.CG)(e=>e.user).has_used_trial,t=u().getMembershipText.pricePerYear;return{getMembershipText:{...u().getMembershipText,trialOrStartMembership:e?"".concat(r.QH.START," â€“ ").concat(t):r.QH.TRIAL},useMembership:u}},b=()=>{let e=(0,n.TL)();return{fetchUserInfo:(0,o.useCallback)(t=>{e((0,d.bG)(t))},[e]),fetchUserSettingsAndBanners:(0,o.useCallback)(()=>{e((0,a.JK)()),e((0,d.H)())},[e])}},f=()=>{let{loggedIn:e,token:t}=(0,n.CG)(e=>e.auth),i=!0===e&&void 0!==e&&!!t;(0,o.useEffect)(()=>{i&&(0,s.F)(t)},[i,t])},h=()=>{let{active_membership:e}=(0,n.CG)(e=>e.user),t=(0,n.CG)(e=>e.cart);return(0,o.useMemo)(()=>e||!!t.subscription,[e,t.subscription])}},26953:function(e,t,i){i.d(t,{Z:function(){return s}});var o=i(67294),n=i(48803),l=i(79045),r=i(39149);function s(){let e=(0,n.Y)(),[t,i]=(0,o.useState)(""),s=(0,o.useCallback)(t=>{e.isConnected?l.Z.emit("Set Error",t?r.Sg.LOAD:""):l.Z.emit("Set Error",t?r.Sg.CONNECTION:"")},[e.isConnected]);return(0,o.useEffect)(()=>{let e=e=>{i(e)};return l.Z.on("Set Error",e),()=>l.Z.remove("Set Error",e)},[]),{error:t,setErrorMessage:s}}},67675:function(e,t,i){var o=i(67294);t.Z=(e,t)=>{let[i,n]=(0,o.useState)(!1),[l,r]=(0,o.useState)(e),[s,d]=(0,o.useState)(""),[a,u]=(0,o.useState)(!1),c=async()=>{n(!0),u(!0);try{await (null==t?void 0:t(l))}catch(e){d(e.message)}finally{u(!1)}};return{formData:l,setFormData:r,error:s,loading:a,handleInputChange:(e,t)=>{r({...l,[e]:t})},handleSubmit:c,handleClean:t=>{r(null!=t?t:e)},submitPressed:i}}},99239:function(e,t,i){i.d(t,{Y:function(){return l}});var o=i(67294),n=i(90900);let l=()=>{let{isStoreStarted:e,authenticated:t}=(0,n.Pk)(),{fetchUserInfo:i,fetchUserSettingsAndBanners:l}=(0,n.gZ)();(0,o.useEffect)(()=>{t&&e&&i(),l()},[t,e])}},67973:function(e,t,i){var o=i(67294),n=i(19738);t.Z=function(){return(n.tq?i(91528).useIsFocused:function(){let[e,t]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{let e=()=>{t(!document.hidden)};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[]),e})()}},98932:function(e,t,i){i.d(t,{Z:function(){return s}});var o=i(85893),n=i(67294),l=i(48803),r=i(79045);function s(){let e=(0,l.Y)(),[t,i]=(0,n.useState)({}),s=(0,n.useCallback)(t=>{e.isConnected,r.Z.emit("Set ModalContext",{default:t})},[e.isConnected]),d=(0,n.useCallback)((t,i)=>{e.isConnected,r.Z.emit("Add To ModalContext",{id:t,newContext:i})},[e.isConnected]);(0,n.useEffect)(()=>{let e=e=>{let{default:t}=e;i(e=>({...e,default:t}))},t=e=>{let{id:t,newContext:o}=e;i(e=>({...e,[t]:o}))};return r.Z.on("Set ModalContext",e),r.Z.on("Add To ModalContext",t),()=>{r.Z.remove("Set ModalContext",e),r.Z.remove("Add To ModalContext",t)}},[]);let a=(0,n.useCallback)(()=>(0,o.jsx)(o.Fragment,{children:Object.entries(t).map(e=>{let[t,i]=e;return(0,o.jsx)(n.Fragment,{children:i},t)})}),[t]);return{modalContext:t,ModalsRenderer:a,setModalContext:s,addToModalContext:d}}},61770:function(e,t,i){var o=i(85893),n=i(67294),l=i(72215),r=i(79045),s=i(39149),d=i(19172),a=i(90900),u=i(98932),c=i(11327),v=i(58218),m=i(25538),p=i(96232),b=i(62457),f=i(15974),h=i(85153);let g=e=>{var t;return(null==e?void 0:e.length)<=0?s.sY.TO_BE_READ:(null==e?void 0:e.length)!==1?"In ".concat(null==e?void 0:e.length," lists"):null===(t=e[0])||void 0===t?void 0:t.title},_=e=>{if(!((null==e?void 0:e.length)<=0))return"In ".concat(null==e?void 0:e.length," list").concat((null==e?void 0:e.length)>1?"s":"")};t.Z=function(e){let{product:t,fromPage:i,segmentEventParams:S,onProductSelected:E,isEditorialList:C,originalList:P,onRefreshProductLists:L}=e,y=(0,l.TL)(),{user:T,loggedIn:w}=(0,a.Pk)(),{addToModalContext:Z}=(0,u.Z)(),[M,x]=(0,n.useState)(),[I,k]=(0,n.useState)(!1),A=e=>{x(e),k(!0)},{trackListSelected:N,basicDefaultLists:R,basicCustomLists:F,default_finished:O,productOnLists:D,onAddToListPressList:G,fetchMyLists:B}=(0,c.Z)({product:t,fromPage:i||"List",showEditNotesModal:A,onRefreshProductLists:L}),{globalUrlParams:Y}=(0,l.CG)(e=>e.globalparams),{currentBookInAddBookToList:j}=(0,l.CG)(e=>e.lists),[U,H]=(0,n.useState)(!1),[V,q]=(0,n.useState)(!1),[z,$]=(0,n.useState)(!1),[J,W]=(0,n.useState)(!1),[Q,X]=(0,n.useState)(),[K,ee]=(0,n.useState)(!1),[et,ei]=(0,n.useState)(!1),[eo,en]=(0,n.useState)(!1),el=C?"":null==t?void 0:t.note,[er,es]=(0,n.useState)(el||""),ed=null==t?void 0:t.saved_in_lists,ea=D&&g(D),eu=w&&ed&&_(ed)||void 0,[ec,ev]=(0,n.useState)(null==t?void 0:t.rate);(0,n.useEffect)(()=>{(null==t?void 0:t.id)&&ev(t.rate)},[null==t?void 0:t.id,null==t?void 0:t.rate]);let em=()=>{t&&y((0,v.RO)(null==t?void 0:t.id,s.Ib.RECOMMEND_POSITIVE)),ev(s.Ib.RECOMMEND_POSITIVE),t&&O&&N({selectedList:{id:O.id,title:s.sY.FINISHED,default:!0},isSelected:!1,segmentEventParams:S,showToast:!1})},ep=()=>{t&&y((0,v.RO)(null==t?void 0:t.id,s.Ib.RECOMMEND_NEGATIVE)),ev(s.Ib.RECOMMEND_NEGATIVE),t&&O&&N({selectedList:{id:O.id,title:s.sY.FINISHED,default:!0},isSelected:!1,segmentEventParams:S,showToast:!1})},eb=()=>{H(!1),q(!0)},ef=e=>{en(!0),A(e)},eh={...S,user:T,product:t,previous_screen:i,initial_url_params:null==Y?void 0:Y.urlParams},eg=(e,t)=>{e&&e.preventDefault(),r.Z.emit("Navigation Push",{name:"Product",params:{dataForSegmentEventProperties:{...eh},product:t}})},e_=e=>{e&&(x(e),X(e),G({selectedList:e}))},eS=(e,t)=>{e&&e.preventDefault();let o={list:t,isEditorialList:(0,d.pg)(t),dataForSegmentEventProperties:{...eh}};"Product"===i?r.Z.emit("Navigation Push",{name:(0,d.Vk)(t),params:o}):r.Z.emit("Navigation Navigate",{name:"MainTabContainer",params:{screen:"MyLists",params:{screen:"PersonalList",params:o}}})};return(0,n.useEffect)(()=>{Z("ListModal",(0,o.jsx)(o.Fragment,{children:t&&(0,o.jsx)(m.Z,{display:U,onClose:()=>H(!1),product:t,onCreateList:eb,productListContext:i,segmentEventParams:S,customListsByBookId:D,onProductAddedToList:A,onListSelected:e_,basicDefaultLists:R,basicCustomLists:F,default_finished:O,trackListSelected:N,onAddToListPressList:G,onRefresh:B,onRefreshProductLists:L})})),Z("CreateListModal",(0,o.jsx)(p.Z,{display:V,onClose:()=>{q(!1)},onBack:()=>{q(!1),H(!0)},onSucces:()=>{B().then(()=>{q(!1),setTimeout(()=>H(!0),500)})},newListContext:i,product:t,segmentEventParams:S})),Z("EditListModal",(0,o.jsx)(b.Z,{display:z,onClose:()=>$(!1),onSucces:()=>$(!1),list:M,handleRefreshList:L})),Z("EditNotesModal",(0,o.jsx)(f.Z,{display:I,onClose:()=>{ee(!1),k(!1),ei(!1),L&&L()},list:M,originalList:P,targetList:Q,product:t||j,onProductSelected:eg,onListLinkSelected:eS,fromPage:i,segmentEventParams:S,onRecommend:em,onNotRecommend:ep,recommend:ec===s.Ib.RECOMMEND_POSITIVE,notRecommend:ec===s.Ib.RECOMMEND_NEGATIVE,setLocalProductNotes:es,shouldRefreshAfterEditNote:eo,isEditorialList:C})),Z("AddBooksToListModal",(0,o.jsx)(h.Z,{display:J,onClose:()=>{W(!1)},onSucces:()=>{W(!1)},list:M,showEditNotesModal:A,handleOnAddBooksFinished:ef}))},[U,V,z,I,J,t,j,M]),{showListModal:()=>{if(!w){r.Z.emit("Navigation Push",{name:"SignupEnterEmail"});return}U?setTimeout(()=>{H(!1),setTimeout(()=>H(!0),100)},100):H(!0)},showEditListModal:e=>{x(e),$(!0)},showAddBooksToListModal:e=>{x(e),W(!0)},listTitle:ea,addToListButtonLabel:eu,loading:!1,showEditNotesModal:A,inNotesEditMode:K,setNotesInEditMode:ee,inEditNotesMode:et,setInEditNotesMode:ei,onProductSelected:E,localProductNotes:er,setLocalProductNotes:es,setList:x}}},11327:function(e,t,i){i.d(t,{Z:function(){return _}});var o=i(67294),n=i(72215),l=i(79045),r=i(19172),s=i(39149),d=i(16627),a=i(90900),u=i(85893),c=i(98932),v=i(96232),m=i(26953),p=i(91960),b=i(83841),f=i(71567),h=i(39330),g=i(18707),_=function(){var e,t,i;let{product:_,fromPage:S,segmentEventParams:E,onRefreshProductLists:C,showEditNotesModal:P}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},L=(0,n.TL)(),{isStoreStarted:y,user:T}=(0,a.Pk)(),{showCreateListModal:w}=function(e){let{}=e,[t,i]=(0,o.useState)(!1),{addToModalContext:n}=(0,c.Z)();return(0,o.useEffect)(()=>{n("CreateListModal",(0,u.jsx)(v.Z,{display:t,onClose:()=>i(!1),onSucces:()=>i(!1),redirectToListOnCreate:!0}))},[t]),{showCreateListModal:()=>{i(!0)}}}({}),{setErrorMessage:Z}=(0,m.Z)(),{pushToast:M}=(0,b.Z)(),{sendSegmentTrack:x}=(0,f.Z)(),{globalUrlParams:I}=(0,n.CG)(e=>e.globalparams),{basicDefaultLists:k,basicCustomLists:A,loading:N,error_message:R}=(0,n.CG)(e=>e.myLists),F=[{id:s.sY.TO_BE_READ,title:s.sY.TO_BE_READ},{id:s.sY.READING,title:s.sY.READING},{id:s.sY.FINISHED,title:s.sY.FINISHED}],O=[...k,...A.content],D=null==T?void 0:null===(e=T.userProfile)||void 0===e?void 0:e.default_public_lists,G=k.filter(e=>null==D?void 0:D.some(t=>t.id===e.id)),B={...A,content:(0,r.VG)(A.content)},Y=async()=>{y&&(await L((0,g.OJ)()),(null==T?void 0:T.id)&&L((0,g.PF)({userId:T.id})),k.length>0&&k.forEach(e=>{L((0,g.mE)(e.id,0))}))};(0,o.useEffect)(()=>{Z(R),p.Z.sendError(R)},[R]);let j=()=>{L((0,g.Jj)()),Y()},U=()=>{w()},H=async()=>{let{last:e,number:t}=B;!e&&T.id&&L((0,g.PF)({userId:T.id,page:t+1}))},{default_toBeRead:V,default_reading:q,default_finished:z}=(0,o.useMemo)(()=>({default_toBeRead:null==k?void 0:k.find(e=>e.title===s.sY.TO_BE_READ),default_reading:null==k?void 0:k.find(e=>e.title===s.sY.READING),default_finished:null==k?void 0:k.find(e=>e.title===s.sY.FINISHED)}),[k]),$=(0,o.useCallback)(e=>{let{selectedList:t,isSelected:i,segmentEventParams:o,showToast:n=!0}=e,l={id:null==t?void 0:t.id,title:null==t?void 0:t.title,description:null==t?void 0:t.description,default:null==t?void 0:t.default,book_count:null==t?void 0:t.book_count,visibility:null==t?void 0:t.visibility,access:null==t?void 0:t.access,list_context:S},r={...o,user:T,product:_,current_screen:S,initial_url_params:null==I?void 0:I.urlParams,product_list:l},a=i?s.FP.ProductRemovedFromList:s.FP.ProductAddedToList;n&&M({type:"success",text:"".concat(i?"Removed From List":"Added To List",": ").concat(t.title)}),x({name:a,params:(0,d.pS)(r)})},[_,S]),J=null==_?void 0:_.saved_in_lists,W=O.filter(e=>null==J?void 0:J.some(t=>t===e.id)),Q=null==A?void 0:null===(t=A.content)||void 0===t?void 0:t.filter(e=>null==J?void 0:J.some(t=>t===e.id)),X=null==k?void 0:k.find(e=>null==J?void 0:J.find(t=>t===e.id)),K=e=>{let t,{selectedList:i,onRefreshProductLists:o}=e;if(!_||!i)return null;let n=()=>{o&&o()},l={id:null==i?void 0:i.id,title:null==i?void 0:i.title,description:null==i?void 0:i.description,default:null==i?void 0:i.default,book_count:null==i?void 0:i.book_count,visibility:null==i?void 0:i.visibility,access:null==i?void 0:i.access,list_context:S},r=null==k?void 0:k.find(e=>e.id===i.id),d={...E,product_list:l};if(r&&(X?(t=X&&(null==X?void 0:X.id)===(null==i?void 0:i.id))?L((0,h.cu)(_,i.id)).then(()=>n()):L((0,h.Il)(_,null==X?void 0:X.id,i.id)).then(()=>n()):(j(),L((0,h.FD)(_,null==i?void 0:i.id)),P(i))),!r){var a;(t=W&&!!(null==W?void 0:null===(a=W.find(e=>e.id===i.id))||void 0===a?void 0:a.id))?L((0,h.cu)(_,i.id)).then(()=>n()):(L((0,h.FD)(_,null==i?void 0:i.id)),P(i))}S!==s.vl.PRODUCT&&j(),$({selectedList:i,isSelected:t,segmentEventParams:d})};return{localBasicDefaultLists:F,allMyLists:O,basicDefaultLists:k,basicCustomLists:A,publicDefaultLists:G,publicCustomLists:B,loading:N,error_message:R,clearMyLists:g.Jj,fetchMyLists:Y,refreshMyLists:j,handleNewList:U,onRefresh:j,onLoadNext:H,onNewList:U,onProductSelected:(e,t,i)=>{e&&e.preventDefault(),l.Z.emit("Navigation Push",{name:"Product",params:{dataForSegmentEventProperties:{user:T,product:t,productCategory:i,previous_screen:S||"MyLists"},product:t}})},onListSelected:e=>{l.Z.emit("Navigation Push",{name:(0,r.Vk)(e),params:{dataForSegmentEventProperties:{user:T,productCategory:e,previous_screen:S||"MyLists"},list:e,isEditorialList:(0,r.pg)(e)}})},onAddToListPressList:K,hideEmpty:A.content.length>0,trackListSelected:$,toBeRead:V,reading:q,read:z,default_toBeRead:V,default_reading:q,default_finished:z,productOnLists:W,onListsExcludingDefaults:Q,currentDefaultList:X,selectToBeRead:()=>{V&&K({selectedList:{id:null==V?void 0:V.id,title:V.title,default:V.default},onRefreshProductLists:C})},hasDefaultList:(null==k?void 0:k.length)>0,hasCustomList:(null==A?void 0:null===(i=A.content)||void 0===i?void 0:i.length)>0}}},30960:function(e,t,i){i.d(t,{Z:function(){return s}});var o=i(67294),n=i(72215),l=i(71519),r=i(90900);function s(e){var t,i,s,d,a,u,c;let{product:v,isCartFirstItem:m,fromPage:p}=e,b=(0,n.TL)(),f=(0,n.CG)(e=>e.settings),h=(0,n.CG)(e=>e.cart),{user:g}=(0,r.Pk)(),{memberOfferPercentage:_}=(0,r.e7)(),S=(0,o.useMemo)(()=>g.active_membership||!!h.subscription,[g.active_membership,h.subscription]),E=null==v?void 0:v.ecommerce,C=null==E?void 0:E.price,P=null==E?void 0:E.special_price,L=(null==E?void 0:E.price)!==(null==E?void 0:E.special_price),y=f.user_has_used_special_offer,T=f.special_offer.special_offer_enabled,w=f.special_offer.max_discount,Z=T&&!y,M="Cart"===p,x=(0,o.useMemo)(()=>h.subscription?[...h.orders,{id:"subscription",type:"subscription",quantity:1}]:h.orders,[h.orders,h.subscription]),I=(null==x?void 0:x.filter(e=>"subscription"===e.type).length)>0,k=(null==x?void 0:x.filter(e=>"product"===e.type).length)>0,A=!y&&!!h.subscription&&k||g.active_membership&&!y&&k,N=Z&&!!h.subscription,R=Z&&(!M&&!A||M&&A&&m),F=!g.active_membership&&!I,O=e=>{var t,i;let{localProduct:o,isCartFirstItem:n,fromPage:l,forSubtotal:r}=e,s=o||v,d=null==s?void 0:s.ecommerce,a=null==d?void 0:d.price,u=null==d?void 0:d.members_price,c=null==d?void 0:d.special_price,m=(null==d?void 0:d.price)!==(null==d?void 0:d.special_price),p="Cart"===l,b=Z&&(!p&&!A||p&&A&&n),f=!b&&(g.active_membership||!g.active_membership&&I||!p&&A||p&&A&&!n),h=!b&&!f;return(null==s?void 0:s.ecommerce)?b||b&&n&&S?null!=c&&""!==c&&m?c:u:(null===(i=s.ecommerce)||void 0===i?void 0:null===(t=i.affiliate_discount)||void 0===t?void 0:t.price)?s.ecommerce.affiliate_discount.price:f?u:r&&h?a:h?u:a:0},D=!!(null==v?void 0:null===(i=v.ecommerce)||void 0===i?void 0:null===(t=i.affiliate_discount)||void 0===t?void 0:t.price),G=!(null==v?void 0:null===(s=v.ecommerce)||void 0===s?void 0:s.discount),B=(null==v?void 0:null===(d=v.ecommerce)||void 0===d?void 0:d.discount)?Number(null==v?void 0:null===(a=v.ecommerce)||void 0===a?void 0:a.discount).toFixed():"0",Y=(null==v?void 0:null===(u=v.ecommerce)||void 0===u?void 0:u.limited_discount)||R&&(null==v?void 0:null===(c=v.ecommerce)||void 0===c?void 0:c.special_price_limited_discount);return{settingsEnabledSpecialOffer:T,settingsSpecialOffer:Z,userHasUsedSpecialOffer:y,withSpecialPrice:null!=P&&""!==P&&L,cartHasActiveSpecialPrice:A,isNewMemberDiscountInUse:N,withSubscriptionInCart:I,withProductInCart:k,cartCompleteForPromotion:I&&k,shouldShowMembershipOfferModal:Z&&!I&&!k&&!S,cartOrders:x,memberOfferPercentage:_,calculatedMembersPrice:O,getProductTotal:e=>{var t;let i=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return O({localProduct:e.product,isCartFirstItem:t,fromPage:p})||"0"},o=h.orders.length-1;if(h.orders.length>0&&h.orders[o].id===e.id&&"product"===h.orders[o].type){let t=e.quantity-1;return 1*parseFloat(i(e,!0))+parseFloat(i(e))*t}return parseFloat(null!==(t=i(e))&&void 0!==t?t:"0")*Number(e.quantity)},getGiftCardTotal:e=>parseFloat(e.amount||"0"),getSubscriptionTotal:e=>parseFloat((null==e?void 0:e.price)||"0"),getDiscountedPrice:e=>{let t=e-_/100*e;return(t-e>w?e-w:t).toFixed(2)},showMaxDiscountLabel:(()=>{let e=C&&Number(C)*_/100;return!!e&&e>w})(),setSpecialOfferModalVisibility:e=>{b((0,l.zf)(e))},caseFirstBookOffer:R,caseStandardMemberPrice:!R&&(!M||M&&!R),caseRegularPrice:F,caseAtCartFirstBookOffer:Z&&M&&A&&m,hasMembership:S,maxDiscount:w,hasAffiliateDiscount:D,showAffiliateDiscount:!(R&&m&&S)&&D,hasLimitDiscount:Y,noDiscountByRateCode:G,discountedPrice:B}}},55981:function(e,t,i){i.d(t,{ZP:function(){return s},yJ:function(){return r}});var o=i(67294),n=i(48200),l=i(86393);let r=1440;function s(){let[e,t]=(0,o.useState)(n.Z.get("window").width);(0,o.useEffect)(()=>{var e;let i;let o=(e=()=>{t(n.Z.get("window").width)},i=null,function(){for(var t=arguments.length,o=Array(t),n=0;n<t;n++)o[n]=arguments[n];null!==i&&clearTimeout(i),i=setTimeout(()=>{null!==i&&clearTimeout(i),e(...o)},500)}),l=n.Z.addEventListener("change",o);return()=>l.remove()},[]);let i=e<768,s=e>=428&&e<1024,d=e>=1024&&e<r,a=e>=r&&e<1920,u=e>=1920;return{width:e,currentSize:i?"mobile":s?"tablet":d?"desktop":a?"desktopLG":u?"desktopXL":"mobile",sidePadding:a?l.ZP.listPadding.desktop:s?l.ZP.listPadding.tablet:l.ZP.listPadding.mobile,smallSidePadding:a?l.ZP.listSmallPadding.desktop:s?l.ZP.listSmallPadding.tablet:l.ZP.listSmallPadding.mobile,isMobile:i,isTablet:s,isDesktop:d,isDesktopLG:a,isDesktopXL:u,isTabletSmUp:e>=428,isTabletUp:e>=768,isDesktopPaddingUp:e>=1344,isDesktopUp:e>=1024,isDesktopLGUp:e>=r}}},71567:function(e,t,i){i.d(t,{Z:function(){return s}});var o=i(1785),n=i.n(o),l=i(80372),r=i(19738);function s(){let e=null===l.ZP||void 0===l.ZP?void 0:l.ZP.user().then(e=>e.anonymousId()),t=()=>{let e=RegExp("(googlebot\\/|bot|Googlebot-Mobile|Googlebot-Image|Google favicon|Mediapartners-Google|bingbot|slurp|java|wget|curl|Commons-HttpClient|Python-urllib|libwww|httpunit|nutch|phpcrawl|msnbot|jyxobot|FAST-WebCrawler|FAST Enterprise Crawler|biglotron|teoma|convera|seekbot|gigablast|exabot|ngbot|ia_archiver|GingerCrawler|webmon |httrack|webcrawler|grub.org|UsineNouvelleCrawler|antibot|netresearchserver|speedy|fluffy|bibnum.bnf|findlink|msrbot|panscient|yacybot|AISearchBot|IOI|ips-agent|tagoobot|MJ12bot|dotbot|woriobot|yanga|buzzbot|mlbot|yandexbot|purebot|Linguee Bot|Voyager|CyberPatrol|voilabot|baiduspider|citeseerxbot|spbot|twengabot|postrank|turnitinbot|scribdbot|page2rss|sitebot|linkdex|Adidxbot|blekkobot|ezooms|dotbot|Mail.RU_Bot|discobot|heritrix|findthatfile|europarchive.org|NerdByNature.Bot|sistrix crawler|ahrefsbot|Aboundex|domaincrawler|wbsearchbot|summify|ccbot|edisterbot|seznambot|ec2linkfinder|gslfbot|aihitbot|intelium_bot|facebookexternalhit|yeti|RetrevoPageAnalyzer|lb-spider|sogou|lssbot|careerbot|wotbox|wocbot|ichiro|DuckDuckBot|lssrocketcrawler|drupact|webcompanycrawler|acoonbot|openindexspider|gnam gnam spider|web-archive-net.com.bot|backlinkcrawler|coccoc|integromedb|content crawler spider|toplistbot|seokicks-robot|it2media-domain-crawler|ip-web-crawler.com|siteexplorer.info|elisabot|proximic|changedetection|blexbot|arabot|WeSEE:Search|niki-bot|CrystalSemanticsBot|rogerbot|360Spider|psbot|InterfaxScanBot|Lipperhey SEO Service|CC Metadata Scaper|g00g1e.net|GrapeshotCrawler|urlappendbot|brainobot|fr-crawler|binlar|SimpleCrawler|Livelapbot|Twitterbot|cXensebot|smtbot|bnf.fr_bot|A6-Indexer|ADmantX|Facebot|Twitterbot|OrangeBot|memorybot|AdvBot|MegaIndex|SemanticScholarBot|ltx71|nerdybot|xovibot|BUbiNG|Qwantify|archive.org_bot|Applebot|TweetmemeBot|crawler4j|findxbot|SemrushBot|yoozBot|lipperhey|y!j-asr|Domain Re-Animator Bot|AddThis)","i"),t=navigator.userAgent;return e.test(t)};return{sendSegmentIdentify:function(i){let{id:o,params:n}=i;return new Promise(async i=>{t()||(await l.ZP.identify(o,n),await l.ZP.alias(e)),i()})},sendSegmentScreen:function(e){let{name:i,params:o}=e;return new Promise(e=>{if(!t()){if(r.tq)l.ZP.screen(i,o);else{l.ZP.page(i,o);let e={event:"pageview",pagePath:o.pagePath,pageTitle:i};n().dataLayer({dataLayer:e})}}e()})},sendSegmentTrack:function(e){let{name:i,params:o}=e;return new Promise(e=>{t()||(l.ZP.track(i,o),n().dataLayer({dataLayer:{event:i}})),e()})},anonymousId:e}}},86713:function(e,t,i){i.d(t,{Z:function(){return l}});var o=i(72215),n=i(39149);function l(e){let{subscriptions:t}=(0,o.CG)(e=>e.settings),{has_used_trial:i}=(0,o.CG)(e=>e.user),l=e=>t.find(t=>(null==t?void 0:t.name)===e),r=l(i?n.$d.REGULAR:n.$d.TRIAL_1_MONTH);return{subscription:e?l(e):r}}},70450:function(e,t,i){i.d(t,{Z:function(){return n}});var o=i(67294);function n(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:800,[n,l]=(0,o.useState)(0);return(0,o.useEffect)(()=>{let e=setInterval(()=>{l(e=>(e+1)%(t.length+1))},i);return()=>{clearInterval(e)}},[t,i]),{textAnim:(0,o.useMemo)(()=>"".concat(e).concat(t.slice(0,n)),[e,t,n])}}},83841:function(e,t,i){i.d(t,{Z:function(){return n}});var o=i(84475);function n(){return{pushToast:function(e){let{type:t,text:i}=e;"success"===t&&o.ZP.success(i),"error"===t&&o.ZP.error(i)}}}}}]);