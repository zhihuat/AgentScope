"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9564],{76882:function(e,t,i){i.d(t,{UL:function(){return d},ZP:function(){return u}});var r=i(85893),o=i(67294),n=function(){return(n=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},l=function(e){var t=e.animate,i=void 0===t||t,r=e.animateBegin,l=e.backgroundColor,s=void 0===l?"#f5f6f7":l,a=e.backgroundOpacity,d=void 0===a?1:a,u=e.baseUrl,c=void 0===u?"":u,v=e.children,m=e.foregroundColor,h=e.foregroundOpacity,g=e.gradientRatio,f=void 0===g?2:g,p=e.gradientDirection,x=e.uniqueKey,y=e.interval,b=e.rtl,Z=e.speed,j=e.style,_=e.title,C=void 0===_?"Loading...":_,L=e.beforeMask,P=void 0===L?null:L,E=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(i[r[o]]=e[r[o]]);return i}(e,["animate","animateBegin","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","gradientDirection","uniqueKey","interval","rtl","speed","style","title","beforeMask"]),k=x||Math.random().toString(36).substring(6),w=k+"-diff",S=k+"-animated-diff",I=k+"-aria",T="0; "+(void 0===y?.25:y)+"; 1",M=(void 0===Z?1.2:Z)+"s";return(0,o.createElement)("svg",n({"aria-labelledby":I,role:"img",style:n(n({},void 0===j?{}:j),void 0!==b&&b?{transform:"scaleX(-1)"}:null)},E),C?(0,o.createElement)("title",{id:I},C):null,P&&(0,o.isValidElement)(P)?P:null,(0,o.createElement)("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url("+c+"#"+w+")",style:{fill:"url("+c+"#"+S+")"}}),(0,o.createElement)("defs",null,(0,o.createElement)("clipPath",{id:w},v),(0,o.createElement)("linearGradient",{id:S,gradientTransform:"top-bottom"===(void 0===p?"left-right":p)?"rotate(90)":void 0},(0,o.createElement)("stop",{offset:"0%",stopColor:s,stopOpacity:d},i&&(0,o.createElement)("animate",{attributeName:"offset",values:-f+"; "+-f+"; 1",keyTimes:T,dur:M,repeatCount:"indefinite",begin:r})),(0,o.createElement)("stop",{offset:"50%",stopColor:void 0===m?"#eee":m,stopOpacity:void 0===h?1:h},i&&(0,o.createElement)("animate",{attributeName:"offset",values:-f/2+"; "+-f/2+"; "+(1+f/2),keyTimes:T,dur:M,repeatCount:"indefinite",begin:r})),(0,o.createElement)("stop",{offset:"100%",stopColor:s,stopOpacity:d},i&&(0,o.createElement)("animate",{attributeName:"offset",values:"0; 0; "+(1+f),keyTimes:T,dur:M,repeatCount:"indefinite",begin:r})))))},s=function(e){return e.children?(0,o.createElement)(l,n({},e)):(0,o.createElement)(a,n({},e))},a=function(e){return(0,o.createElement)(s,n({viewBox:"0 0 476 124"},e),(0,o.createElement)("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),(0,o.createElement)("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),(0,o.createElement)("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),(0,o.createElement)("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),(0,o.createElement)("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),(0,o.createElement)("circle",{cx:"20",cy:"20",r:"20"}))};function d(e){return(0,r.jsx)("rect",{...e})}var u=function(e){return(0,r.jsx)(s,{...e})}},69270:function(e,t,i){var r=i(85893),o=i(2962),n=i(51023),l=i(43539);t.Z=e=>{let{noindex:t,nofollow:i,canonical:s,title:a,description:d,openGraph:u,additionalLinkTags:c,additionalMetaTags:v,...m}=e,h="production"!==n.Z.APP_ENVIRONMENT||"development"===(0,l.zj)();return(0,r.jsx)(o.PB,{noindex:h||t,nofollow:h||i,canonical:s,title:a||void 0,description:d||void 0,openGraph:{title:(null==u?void 0:u.title)?null==u?void 0:u.title:a||void 0,description:(null==u?void 0:u.description)?null==u?void 0:u.description:d||void 0,...u},additionalLinkTags:c,additionalMetaTags:v,...m})}},2370:function(e,t,i){i.d(t,{Z:function(){return eu}});var r=i(85893),o=i(67294),n=i(72215),l=i(79045),s=i(43539),a=i(19738),d=i(19172),u=i(39149),c=i(90900),v=i(91960),m=i(59585),h=i(61770),g=i(39330),f=i(57012),p=i(16005),x=i(39945),y=i(94367),b=i(55981),Z=i(27554),j=i(45033),_=i(64521),C=i(21190),L=i(3678),P=i(36827),E=i(76882),k=i(86393),w=function(){return(0,r.jsxs)(E.ZP,{width:330,height:582,viewBox:"0 0 330 582",backgroundColor:k.ZP.colors.gray1,foregroundColor:k.ZP.colors.gray1,children:[(0,r.jsx)(E.UL,{x:"0",y:"188",rx:"2",ry:"2",width:"122",height:"180"}),(0,r.jsx)(E.UL,{x:"0",y:"402",rx:"2",ry:"2",width:"122",height:"180"}),(0,r.jsx)(E.UL,{x:"1",y:"1",rx:"2",ry:"2",width:"329",height:"18"}),(0,r.jsx)(E.UL,{x:"1",y:"34",rx:"2",ry:"2",width:"308",height:"18"}),(0,r.jsx)(E.UL,{x:"1",y:"67",rx:"2",ry:"2",width:"329",height:"18"}),(0,r.jsx)(E.UL,{x:"1",y:"100",rx:"2",ry:"2",width:"308",height:"18"}),(0,r.jsx)(E.UL,{x:"144",y:"188",rx:"2",ry:"2",width:"164",height:"18"}),(0,r.jsx)(E.UL,{x:"144",y:"221",rx:"2",ry:"2",width:"146",height:"18"}),(0,r.jsx)(E.UL,{x:"144",y:"254",rx:"2",ry:"2",width:"164",height:"18"}),(0,r.jsx)(E.UL,{x:"144",y:"287",rx:"2",ry:"2",width:"146",height:"18"}),(0,r.jsx)(E.UL,{x:"1",y:"133",rx:"2",ry:"2",width:"329",height:"18"}),(0,r.jsx)(E.UL,{x:"144",y:"402",rx:"2",ry:"2",width:"164",height:"18"}),(0,r.jsx)(E.UL,{x:"144",y:"435",rx:"2",ry:"2",width:"146",height:"18"}),(0,r.jsx)(E.UL,{x:"144",y:"468",rx:"2",ry:"2",width:"164",height:"18"}),(0,r.jsx)(E.UL,{x:"144",y:"501",rx:"2",ry:"2",width:"146",height:"18"})]})},S=i(87831),I=i(16627),T=i(26035),M=i(71567),O=i(11327),U=i(83841),R=i(98932),A=i(30960),N=i(86713),F=i(67973),V=i(65319),B=i(60994),H=i(87529),D=i(90517),q=i(60469),G=i(52386),z=i(12005),W=i(53872),K=i(44521),Y=i(17988),J=i(86862),X=i(20395),$=i(3528),Q=i(79576),ee=i(75731),et=i(13753),ei=i(8897),er=i(74371),eo=i(17422),en=i(62399),el=o.memo(function(e){var t,i,s,d,v,m,g,f,p;let{product:x,onProductSelected:y,onMentionerSelected:b,mentioners:Z,fromPage:C,isEditorialList:L,segmentEventParams:P,list:E,onRefreshList:k,setCurrentList:w}=e,{user:S}=(0,c.Pk)(),{globalUrlParams:en}=(0,n.CG)(e=>e.globalparams),{loading:el}=(0,n.CG)(e=>e.cart),es=(0,F.Z)(),{sendSegmentTrack:ea}=(0,M.Z)(),{pushToast:ed}=(0,U.Z)(),eu=(0,n.TL)(),{subscription:ec}=(0,N.Z)(),{addToModalContext:ev}=(0,R.Z)(),[em,eh]=(0,o.useState)(!1),[eg,ef]=(0,o.useState)(!1),[ep,ex]=(0,o.useState)(x),[ey,eb]=(0,o.useState)(!1),[eZ,ej]=(0,o.useState)(u.NZ.INACTIVE),e_=C===u.vl.EDITORIAL_LIST,eC=(0,o.useCallback)(async function(){var e,t,i;let{productId:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};eb(!0);let o=(null==x?void 0:x.id)||r||"",n=await B.Z.getProductById(o);ex(e=>({...e,saved_in_lists:null==n?void 0:n.saved_in_lists}));let l=null!==(i=null==E?void 0:null===(t=E.books)||void 0===t?void 0:null===(e=t.content)||void 0===e?void 0:e.length)&&void 0!==i?i:0;o&&l>T.Hj?w&&w(e=>{if(!e)return e;let t=e.books.content.filter(e=>e.id!==o);return{...e,books:{...e.books,content:t}}}):!e_&&k&&k(),eb(!1)},[x,E,k,e_]),{showListModal:eL,showEditNotesModal:eP,inEditNotesMode:eE,setInEditNotesMode:ek,addToListButtonLabel:ew,localProductNotes:eS}=(0,h.Z)({product:ep,fromPage:null!=C?C:"List",segmentEventParams:P,isEditorialList:L,originalList:E,onRefreshProductLists:eC}),{productOnLists:eI,selectToBeRead:eT}=(0,O.Z)({product:ep,fromPage:null!=C?C:"List",segmentEventParams:P,showEditNotesModal:eP,onRefreshProductLists:eC}),[eM,eO]=(0,o.useState)(eI),{setSpecialOfferModalVisibility:eU,shouldShowMembershipOfferModal:eR,hasMembership:eA}=(0,A.Z)({product:ep,fromPage:C}),eN=(null==ep?void 0:null===(i=ep.ecommerce)||void 0===i?void 0:null===(t=i.availability_status)||void 0===t?void 0:t.code)==="OUT_OF_STOCK",eF="List"===C||"EditorialList"===C,eV=null==ep?void 0:ep.recommendation_feedback,eB=!!(null==ep?void 0:ep.editorial_pre_headline),eH=eZ!==u.NZ.INACTIVE;(0,o.useEffect)(()=>{x&&ex(x)},[x]),(0,o.useEffect)(()=>{es&&(ev("AddedToCartModal",(0,r.jsx)(q.Z,{display:em,onClose:()=>eh(!1),onGoToCart:()=>{eh(!1),setTimeout(()=>eY(),1e3)},product:ep})),ev("AfterPurchaseMembershipModal",(0,r.jsx)(z.Z,{display:eg,onClose:()=>{ef(!1),eh(!1)},onContinue:()=>{ef(!1),setTimeout(()=>eh(!0),1e3)},product:ep,onAddMembershipFromModalAfterPurchase:()=>{ef(!1),setTimeout(()=>ez(),1e3)},hasMembership:eA})),ev("CartLoading",(0,r.jsx)(G.Z,{display:el})))},[em,eg,ep,el]),(0,o.useEffect)(()=>{ey||eO(eI)},[ey]);let eD=[...(null===(s=ep.ecommerce)||void 0===s?void 0:s.attributes)||[],...(null===(v=ep.ecommerce)||void 0===v?void 0:null===(d=v.affiliate_discount)||void 0===d?void 0:d.attributes)||[]],eq=()=>{ea({name:u.FP.ProductAddedToCart,params:(0,I.pS)({user:S,product:ep,current_screen:C||"List",initial_url_params:null==en?void 0:en.urlParams})}),eu((0,V.Hk)({orderId:ep.id,product:ep,type:"product",attributes:eD})),eh(!0)},eG=(0,o.useCallback)(()=>{if(eN)return null;setTimeout(()=>{eR?(ef(!0),eU(!0),ea({name:u.FP.ProductAddedToCart,params:(0,I.pS)({user:S,product:ep,current_screen:C||"List",initial_url_params:null==en?void 0:en.urlParams})}),console.log({attributes:eD}),eu((0,V.Hk)({orderId:ep.id,product:ep,type:"product",attributes:eD})),ed({type:"success",text:"Added to Cart"})):eq()},100)},[eN,eR,ef,eU,ea,eu,V.Hk,ed,eq,S,ep,C,en]),ez=(0,o.useCallback)(()=>{ea({name:u.FP.MembershipTrialAdded,params:(0,I.pS)({user:S,product:ep,current_screen:C||"List",context:"MembershipModal",initial_url_params:null==en?void 0:en.urlParams})}),eu((0,V.VF)(ec)),ed({type:"success",text:"Membership Added to Cart"}),ef(!1),eh(!0)},[ea,eu,V.VF,ed,S,ep,C,en,ec,ef,eh]),eW=(0,o.useCallback)(()=>{(null==eI?void 0:eI.length)>0?eL():eT()},[eI,eL,eT]),eK=(0,o.useCallback)(()=>{l.Z.emit("Navigation Push",{name:"SignupEnterEmail",params:{callback:()=>{l.Z.emit("Navigation GoBack",{})}}})},[]),eY=(0,o.useCallback)(()=>{l.Z.emit("Navigation Navigate",{name:"Cart",params:{dataForSegmentEventProperties:{user:S,current_screen:C||"List",context:"AddedToCartModal",initial_url_params:null==en?void 0:en.urlParams}}})},[S,C,en]),eJ=(0,o.useMemo)(()=>(0,r.jsx)(et.Z,{productFromProp:ep,compactMode:!0,fromPage:C,isPageCart:"Cart"===C}),[ep,C]);return(0,r.jsxs)(_.Z,{style:[er.Z.productCard,eF?er.Z.productCardList:void 0,eB?er.Z.productCardWithPreheader:void 0,eV?er.Z.productCardWithFeedback:void 0],cssClass:"UI_listMention".concat(eB?"":" UI_listMentionInner"),children:[eB&&(0,r.jsx)(Y.Z,{preHeadline:null==ep?void 0:ep.editorial_pre_headline}),(0,r.jsxs)(D.Z,{condition:eB,wrapper:e=>(0,r.jsx)(_.Z,{cssClass:"UI_listMentionInner",style:er.Z.productCardInner,children:e}),children:[(0,r.jsx)(J.Z,{product:ep,onProductSelected:y}),(0,r.jsxs)(_.Z,{style:eo.Z.columnData,cssClass:"UI_mentionData",children:[(0,r.jsx)(X.Z,{product:ep,onProductSelected:y,isPageCart:"Cart"===C}),!a.tq&&(0,r.jsx)(j.Z,{}),"List"!==C&&(0,r.jsx)($.Z,{mentioners:Z,product:ep,onMentionerSelected:b,onProductSelected:y,fromPage:C,isEditorialList:L}),!L&&(0,r.jsx)(Q.Z,{product:ep,onProductSelected:y,list:E,fromPage:C,showEditNotesModal:eP,inEditNotesMode:eE,setInEditNotesMode:ek,localProductNotes:eS||""}),(0,r.jsx)(ee.Z,{code:null==ep?void 0:null===(g=ep.ecommerce)||void 0===g?void 0:null===(m=g.availability_status)||void 0===m?void 0:m.code,label:null==ep?void 0:null===(p=ep.ecommerce)||void 0===p?void 0:null===(f=p.availability_status)||void 0===f?void 0:f.label}),eJ,(0,r.jsx)(_.Z,{style:eo.Z.buttonsContainer,cssClass:"UI_mentionActions",children:(0,r.jsx)(ei.Z,{product:ep,productOnLists:eM,fromPage:C,handleSelectList:eL,handleToBeReadList:eW,handleGoToSignup:eK,calculateAddToCartTarget:eG,addToListButtonLabel:ew,isUpdatingProduct:ey})}),(0,r.jsx)(W.Z,{list:E,product:ep,setRecommendationFormStatus:ej,fromPage:C})]}),eg&&(0,r.jsx)(_.Z,{children:(0,r.jsx)(H.Z,{children:" "})})]}),eH&&(0,r.jsx)(K.Z,{list:E,product:ep,recommendationFormStatus:eZ,setRecommendationFormStatus:ej})]})},en.E);let es=e=>{var t;return null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null==e?void 0:e.book_id};var ea=o.memo(function(e){let{isEditorialList:t,list:i,listHeaderImage:n,listHeaderImageMobile:l,content:s,size:c,loading:v,refreshing:m,lastPage:h,onLoadNext:g,onRefresh:f,onProductSelected:p,onMentionerSelected:E,onShare:I,onEdit:T,onAdd:M,isOwner:O,categories:U,segmentEventParams:R,bookCount:A,errorProp:N,setCurrentList:F}=e,V=(0,b.ZP)(),B=o.useRef(!1),H=o.useRef(!1),D=(null==i?void 0:i.custom_list)||i,q=!v,G=(null==D?void 0:D.error_code)==="NOT_FOUND"&&!(null==D?void 0:D.redirect),z=(null==D?void 0:D.error_code)==="BAD_REQUEST"&&!(null==D?void 0:D.redirect),W=(0,o.useCallback)(()=>{var e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(P.Z,{list:i,listHeaderImage:n,listHeaderImageMobile:l,content:s,onShare:I,onEdit:T,onAdd:M,onRefresh:f,isOwner:O,loading:v,isEditorialList:t,fromPage:u.vl.READING_LIST,featuredBook:null==D?void 0:null===(e=D.public_user_profile)||void 0===e?void 0:e.featured_book,onProductSelected:p}),v&&a.tq&&(0,r.jsx)(_.Z,{cssClass:"UI_listHeaderInner",style:k.W0.listHeaderInner,children:(0,r.jsx)(w,{})})]})},[i,s,v,N]),K=(0,o.useCallback)(()=>(0,r.jsxs)(r.Fragment,{children:[!h&&!v&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.Z,{size:"hairline",withDivider:!0}),(0,r.jsx)(j.Z,{size:"xl2"}),(0,r.jsx)(C.Z,{onLoadNext:g,isAllContentLoaded:h,typeToLoad:"books"})]}),(0,r.jsx)(j.Z,{size:"xl2",withDivider:!0}),(0,r.jsx)(j.Z,{size:"xl2"}),(0,r.jsx)(S.Z,{title:"More Reading Lists to Explore",categories:U,presetTitle:"titleMentions",filterListId:[(null==D?void 0:D.id)||""],itemsToScroll:3,verticalLayout:!0,itemsPerPage:6,typeRenderItem:V.isMobile?"secondary":"primary",fromPage:(0,d.Vk)(D)})]}),[h,v,U,D,null==D?void 0:D.id]),Y=(0,Z.Z)(s);return q&&G?(0,r.jsx)(L.Z,{imageAltText:"List not found",bigText:(0,r.jsxs)(r.Fragment,{children:["We can't seem to find the list you're looking for. ",a.tq?"\n":(0,r.jsx)("br",{}),"Please check the link."]}),desktopHTML:'\n          <p><center>\n            <b><a href="/lists">Explore Reading Lists ></a></b>\n          </center></p>\n        '}):q&&z?(0,r.jsx)(L.Z,{imageAltText:"List was rejected",bigText:(0,r.jsxs)(x.Z,{children:["This list has been removed as it doesn’t follow ",a.tq?"\n":(0,r.jsx)("br",{})," our content moderation guidelines."]}),secondaryHTML:'\n          <p><center>\n            If you believe there has been a mistake you can ask us to <br />\n            review our decision by contacting <a href="mailto:help@tertulia.com">help@tertulia.com.</a>\n          </center></p>\n        '}):q&&!i?(0,r.jsx)(L.Z,{imageAltText:"You don't have access",bigText:(0,r.jsx)(x.Z,{children:"You don't have access to view this list of books. Ask the owner to share it with you."})}):(0,r.jsx)(_.Z,{style:k.W0.body,cssClass:"UI_readingListPage",children:(0,r.jsxs)(_.Z,{cssClass:"UI_mentions",children:[(0,r.jsx)(_.Z,{cssClass:"UI_productList",children:(0,r.jsx)(y.Z,{removeClippedSubviews:!0,refreshing:m,initialNumToRender:c,maxToRenderPerBatch:c,data:Y,onRefresh:a.tq?f:void 0,renderItem:e=>(B.current=e.index+1===(null!=A?A:0),H.current=s.length===e.index+1,(0,r.jsx)(el,{product:e.item,isEditorialList:t,mentioners:e.item.mentioners,fromPage:t?"EditorialList":"List",segmentEventParams:R,onProductSelected:p,onMentionerSelected:E,list:D,onRefreshList:f,setCurrentList:F})),keyExtractor:es,ListHeaderComponent:W,ListFooterComponent:K})}),!a.tq&&(0,r.jsx)(_.Z,{cssClass:"UI_rightList",children:(0,r.jsx)(S.Z,{title:"Featured Reading Lists",categories:["FEATURED"],listFeatured:!0,showsHorizontalScrollIndicator:!1,itemsToScroll:3,typeRenderItem:"secondary",verticalLayout:!0,forSidebar:!0,itemsPerPage:4,filterListId:[(null==D?void 0:D.id)||""],isEditorialList:!0,fromPage:(0,d.Vk)(D)})})]})})},en.E),ed=i(46606),eu=o.memo(function(e){var t;let{route:i}=e,{isStoreStarted:x,user:y}=(0,c.Pk)(),b=(0,Z.Z)(y),{globalUrlParams:j}=(0,n.CG)(e=>e.globalparams),{friendlyUrl:_,list:C,htmlTitle:L,isEditorialList:P,categories:E,errorProp:k,fromPage:w,router:S}=i.params,[I,T]=(0,o.useState)(C);(0,ed.K)(()=>T(C),[C]);let[M,O]=(0,o.useState)(!0),[U,R]=(0,o.useState)(k),[A,N]=(0,o.useState)(!1),[F]=(0,o.useState)((null==C?void 0:C.id)||""),V=(null==I?void 0:I.custom_list)||I||C,B=P||(null==i?void 0:i.name)==="EditorialList",H=(null==I?void 0:I.web_header_image)||(null==C?void 0:C.web_header_image),D=(null==I?void 0:I.mobile_header_image)||(null==C?void 0:C.mobile_header_image),q=y.id===(null==V?void 0:V.owner_user_id),G=null==V?void 0:V.categories;(B||(null==I?void 0:I.categories))&&(G=(null==C?void 0:C.categories)||(null==I?void 0:I.categories));let{content:z,size:W,total_pages:K,number:Y,last:J}=null!==(t=null==V?void 0:V.books)&&void 0!==t?t:g._X,X=_||(null==V?void 0:V.id),$=B?p.Z.getEditorialByFriendlyUrl:f.Z.getReadingListBySlugOrId,Q=async()=>{try{O(!0),R(null);let e=await $({friendly_url:X});(null==e?void 0:e.redirect)&&(e=await $({friendly_url:null==e?void 0:e.redirect})),e&&(T(e),visualViewport,eo(e))}catch(e){R(e),v.Z.sendError(e)}finally{O(!1)}},ee=o.useCallback(async()=>{N(!0),await Q()},[]),{showShareModal:et}=(0,m.Z)({handleRefresh:ee}),{showEditListModal:ei,showAddBooksToListModal:er,setList:eo}=(0,h.Z)({fromPage:"List",onRefreshProductLists:ee});(0,o.useEffect)(()=>{x&&X&&Q()},[x,X]),(0,o.useEffect)(()=>{M||N(!1)},[M]);let en=o.useMemo(()=>w?w:(0,d.Vk)(I)||(B?"EditorialList":"PersonalList"),[w,I,B]),el=o.useMemo(()=>({user:b,previous_screen:en,initial_url_params:null==j?void 0:j.urlParams}),[b,en,null==j?void 0:j.urlParams]),es=o.useCallback(async()=>{try{if(Y+1<=K){var e,t;let i=await $({friendly_url:X,page:Math.min(Y+1,K)}),r=(null==i?void 0:i.custom_list)||i;(null==r?void 0:null===(e=r.books)||void 0===e?void 0:e.content)&&!(null==r?void 0:null===(t=r.books)||void 0===t?void 0:t.first)&&T(e=>{var t,i,o,n;let l=(null==e?void 0:e.custom_list)||e,s=new Set(null===(t=l.books)||void 0===t?void 0:t.content.map(e=>e.id)),a=null!==(n=null==r?void 0:null===(i=r.books)||void 0===i?void 0:i.content.filter(e=>!s.has(e.id)))&&void 0!==n?n:[],d={...null==r?void 0:r.books,content:[...(null==l?void 0:null===(o=l.books)||void 0===o?void 0:o.content)||[],...a]};return{...l,books:d}})}}catch(e){v.Z.sendError(e)}},[K,X,Y]),eu=o.useCallback((e,t)=>{null==e||e.preventDefault();let i={...el,product:t};l.Z.emit("Navigation Push",{name:"Product",params:{dataForSegmentEventProperties:i,product:t}})},[el]),ec=o.useCallback((e,t)=>{null==e||e.preventDefault();let i={...el,mentioner:t};l.Z.emit("Navigation Push",{name:"Voice",params:{dataForSegmentEventProperties:{...i},mentioner:t}})},[el]),ev=o.useCallback(()=>{et(B?{editorialList:{friendlyUrl:_,htmlTitle:L,list:V}}:{list:V})},[B,_,L,V,et]),em=o.useCallback(()=>{V&&ei(V)},[V,ei]),eh=o.useCallback(()=>{V&&er(V)},[V,er]);return(0,o.useEffect)(()=>{!a.tq&&S&&!B&&((null==V?void 0:V.status)===404&&(ee(),(0,l.J)(null==V?void 0:V.redirect,!1)),(null==V?void 0:V.status)===u.wI.PUBLISHED&&(0,s.RV)(_)&&((0,l.J)("list/".concat(null==V?void 0:V.friendly_url),!1),ee()))},[_,null==V?void 0:V.status,null==V?void 0:V.friendly_url,null==V?void 0:V.redirect,F,S,P]),(0,r.jsx)(ea,{isEditorialList:B,list:I,listHeaderImage:H,listHeaderImageMobile:D,content:z,size:W,loading:M,refreshing:A,lastPage:J,onLoadNext:es,onRefresh:ee,onProductSelected:eu,onMentionerSelected:ec,onShare:ev,onEdit:B?()=>{}:em,onAdd:B?()=>{}:eh,isOwner:q,categories:E||G,segmentEventParams:el,bookCount:(null==I?void 0:I.book_count)||0,errorProp:U||k,setCurrentList:T})},en.E)},46606:function(e,t,i){i.d(t,{K:function(){return n}});var r=i(67294),o=i(27554);function n(e,t){(0,r.useEffect)(e,t.map(o.Z))}},2527:function(e,t,i){i.d(t,{q:function(){return o}});var r=i(39149);let o=e=>{var t;let i=(null!==(t=null==e?void 0:e.last_books)&&void 0!==t?t:[])[0];return(null==e?void 0:e.avatar)||(null==i?void 0:i.image_url)||r.Cr}},42708:function(e,t,i){i.d(t,{YD:function(){return d}});var r=i(67294),o=Object.defineProperty,n=new Map,l=new WeakMap,s=0,a=void 0;function d({threshold:e,delay:t,trackVisibility:i,rootMargin:o,root:d,triggerOnce:u,skip:c,initialInView:v,fallbackInView:m,onChange:h}={}){var g;let[f,p]=r.useState(null),x=r.useRef(),[y,b]=r.useState({inView:!!v,entry:void 0});x.current=h,r.useEffect(()=>{let r;if(!c&&f)return r=function(e,t,i={},r=a){if(void 0===window.IntersectionObserver&&void 0!==r){let o=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:"number"==typeof i.threshold?i.threshold:0,time:0,boundingClientRect:o,intersectionRect:o,rootBounds:o}),()=>{}}let{id:o,observer:d,elements:u}=function(e){let t=Object.keys(e).sort().filter(t=>void 0!==e[t]).map(t=>{var i;return`${t}_${"root"===t?(i=e.root)?(l.has(i)||(s+=1,l.set(i,s.toString())),l.get(i)):"0":e[t]}`}).toString(),i=n.get(t);if(!i){let r;let o=new Map,l=new IntersectionObserver(t=>{t.forEach(t=>{var i;let n=t.isIntersecting&&r.some(e=>t.intersectionRatio>=e);e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=n),null==(i=o.get(t.target))||i.forEach(e=>{e(n,t)})})},e);r=l.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),i={id:t,observer:l,elements:o},n.set(t,i)}return i}(i),c=u.get(e)||[];return u.has(e)||u.set(e,c),c.push(t),d.observe(e),function(){c.splice(c.indexOf(t),1),0===c.length&&(u.delete(e),d.unobserve(e)),0===u.size&&(d.disconnect(),n.delete(o))}}(f,(e,t)=>{b({inView:e,entry:t}),x.current&&x.current(e,t),t.isIntersecting&&u&&r&&(r(),r=void 0)},{root:d,rootMargin:o,threshold:e,trackVisibility:i,delay:t},m),()=>{r&&r()}},[Array.isArray(e)?e.toString():e,f,d,o,u,c,i,m,t]);let Z=null==(g=y.entry)?void 0:g.target,j=r.useRef();f||!Z||u||c||j.current===Z||(j.current=Z,b({inView:!!v,entry:void 0}));let _=[p,y.inView,y.entry];return _.ref=_[0],_.inView=_[1],_.entry=_[2],_}r.Component}}]);