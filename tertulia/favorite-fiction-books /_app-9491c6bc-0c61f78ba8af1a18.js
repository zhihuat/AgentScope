"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3690],{59651:function(e,t,o){o.d(t,{LZ:function(){return d},gm:function(){return g},rn:function(){return R}});var i=o(29829),s=o(91960),n=o(25768);let l={loading:!1,__typename:"NotLoaded",id:""},r={loading:!1,content:[],previews:[],main:void 0,assets:{},entries:{},error:void 0,max:9999},a=(0,i.oM)({name:"Articles",initialState:r,reducers:{clearArticles:()=>r,clearAllArticles:e=>{e.loading=!1,e.content=[],e.previews=[],e.main=void 0,e.error=void 0,e.max=999},getArticleBySlugRequest:e=>{e.loading=!0,e.error=void 0},getArticleBySlugSuccess:(e,t)=>{let{response:o}=t.payload;e.loading=!1,e.main=o,e.error=void 0},getArticleBySlugFailure:(e,t)=>{e.loading=!1,e.error=t.payload},getArticlesRequest:e=>{e.error=void 0},getArticlesSuccess:(e,t)=>{let{response:o,skip:i,limit:s}=t.payload;o.length>0?e.content=[...e.content.slice(0,i),...o,...e.content.slice(i+s)]:e.max=e.content.length,e.error=void 0},getArticlesFailure:(e,t)=>{e.error=t.payload},getArticlesPreviewRequest:e=>{e.error=void 0},getArticlesPreviewSuccess:(e,t)=>{let{response:o}=t.payload;e.previews=o,e.error=void 0},getArticlesPreviewFailure:(e,t)=>{e.error=t.payload},getAssetsRequest:e=>{e.loading=!0,e.error=void 0},getAssetsSuccess:(e,t)=>{let o=t.payload.response;e.loading=!1,e.assets=o.reduce((e,t)=>({...e,[t.sys.id]:t}),e.assets),e.error=void 0},getAssetsFailure:(e,t)=>{e.loading=!1,e.error=t.payload},getEntryRequest:(e,t)=>{e.entries[t.payload]={...l,loading:!0}},getEntrySuccess:(e,t)=>{let o=t.payload.entry;e.entries[o.sys.id]={...l,content:o}},getEntryFailure:(e,t)=>{let{entryId:o,error:i}=t.payload;e.entries[o]={...l,error:i}}}}),{clearArticles:d,clearAllArticles:u,getArticleBySlugRequest:c,getArticleBySlugSuccess:g,getArticleBySlugFailure:p,getArticlesRequest:m,getArticlesSuccess:f,getArticlesFailure:k,getArticlesPreviewRequest:y,getArticlesPreviewSuccess:v,getArticlesPreviewFailure:b,getAssetsRequest:_,getAssetsSuccess:h,getAssetsFailure:S,getEntryRequest:I,getEntrySuccess:L,getEntryFailure:B}=a.actions;function R(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,o=arguments.length>2?arguments[2]:void 0;return i=>{i(y()),n.Z.getArticlesPreview(t,o).then(o=>{i(v({response:o,skip:e,limit:t}))},e=>{i(b({error:e.toString()})),s.Z.sendError(e)})}}t.ZP=a.reducer},35292:function(e,t,o){o.d(t,{F0:function(){return v},M2:function(){return b},MK:function(){return d},Oh:function(){return h},R8:function(){return u},Ug:function(){return c},kX:function(){return a},pm:function(){return l}});var i=o(29829),s=o(91960),n=o(30842);let l={ask_prompt:"",list_title:"",message:"",suggestions:[],raw_response:"",content:[],loading:!1,error_code:""},r=(0,i.oM)({name:"ask",initialState:{askStatus:"OFF",loading:!1,error_message:void 0,history:[],autocomplete:[],results:[l]},reducers:{setBookGptStatus:(e,t)=>{e.askStatus=t.payload},removeAskPrompt:(e,t)=>{let o=t.payload;e.results=e.results.filter(e=>e.ask_prompt!==o)},askResultsCleanup:e=>{e.results=e.results.filter(e=>void 0!==e.ask_prompt&&null!==e.ask_prompt&&""!==e.ask_prompt&&""!==e.list_title),e.error_message=""},clearSearchResults:(e,t)=>{e.results=e.results.filter(e=>void 0!==e.ask_prompt&&null!==e.ask_prompt&&""!==e.ask_prompt&&""!==e.list_title);let o=e.results.findIndex(e=>e.ask_prompt===t.payload);if(e.results&&-1===o&&""!==t.payload){let o={...l,ask_prompt:t.payload};e.results.push(o)}},getSearchResultsRequest:(e,t)=>{let o=t.payload,i=e.results.findIndex(e=>e.ask_prompt===o);e.error_message="",-1!==i&&(e.results[i].loading=!0)},getSearchResultsSuccess:(e,t)=>{let{ask_prompt:o,books:i,list_title:s,message:n,suggestions:l,raw_response:r,error_code:a}=t.payload,d=e.results.findIndex(e=>e.ask_prompt===o);-1!==d&&(e.results[d].loading=!1,e.results[d].ask_prompt=null==o?void 0:o.trim(),e.results[d].content=i,e.results[d].list_title=null==s?void 0:s.trim(),e.results[d].message=null==n?void 0:n.trim(),e.results[d].suggestions=l,e.results[d].raw_response=r,e.results[d].error_code=a)},getSearchResultsFailure:(e,t)=>{let{ask_prompt:o}=t.payload,i=e.results.findIndex(e=>e.ask_prompt===o);-1!==i&&(e.results[i].loading=!1),e.error_message=t.payload},getSearchAutocompleteRequest:e=>{e.loading=!0},getSearchAutocompleteSuccess:(e,t)=>{e.loading=!1,e.autocomplete=t.payload},getSearchAutocompleteFailure:(e,t)=>{e.loading=!1,e.error_message=t.payload},addSearchHistory:(e,t)=>{-1===e.history.indexOf(t.payload)&&e.history.push(t.payload)},removeSearchHistory:(e,t)=>{e.history=e.history.filter(e=>e!==t.payload)},clearSearchHistory:e=>{e.history=[]}}}),{setBookGptStatus:a,removeAskPrompt:d,askResultsCleanup:u,clearSearchResults:c,getSearchResultsRequest:g,getSearchResultsSuccess:p,getSearchResultsFailure:m,getSearchAutocompleteRequest:f,getSearchAutocompleteSuccess:k,getSearchAutocompleteFailure:y,addSearchHistory:v,removeSearchHistory:b,clearSearchHistory:_}=r.actions;function h(e){return t=>{t(g(e)),n.Z.getAskResults(e).then(o=>{t(p({...o,ask_prompt:e}))},e=>{t(m(e.toString())),s.Z.sendError(e)})}}t.ZP=r.reducer},96761:function(e,t,o){o.d(t,{$q:function(){return B},Lt:function(){return K},Y$:function(){return T},dv:function(){return eo},fZ:function(){return ee},kS:function(){return et}});var i=o(69606),s=o(29829),n=o(91960),l=o(71478),r=o(79045),a=o(69574),d=o(59651),u=o(65319),c=o(39330),g=o(27597),p=o(4400),m=o(98502),f=o(68526),k=o(71519),y=o(91067),v=o(33708),b=o(81261),_=o(18707),h=o(7861),S=o(61028);let I=(0,s.oM)({name:"auth",initialState:{version:"0.0.0",loggedIn:!1,loggingIn:!1,token:null,email:null,secret_code:null,error:void 0,isAdmin:!1,isTwitter:!1,isEmail:!1,isGuess:!1,twitterConnect:!1,currentTab:null,lastMultipassLogin:null},reducers:{clearAuth:e=>{e.loggedIn=!1,e.loggingIn=!1,e.token=null,e.email=null,e.secret_code=null,e.error=null,e.isAdmin=!1,e.isTwitter=!1,e.isEmail=!1,e.isGuess=!1,e.twitterConnect=!1,e.currentTab=null,e.lastMultipassLogin=null},setAppVersion:(e,t)=>{e.version=t.payload},createGuestUserRequest:e=>{e.token=void 0,e.error=void 0},createGuestUserSuccess:(e,t)=>{e.token=t.payload},createGuestUserFailure:(e,t)=>{e.loggingIn=!1,e.error=t.payload},loginWithEmailRequest:e=>{e.loggingIn=!0,e.error=void 0},loginWithEmailSuccess:(e,t)=>{e.loggingIn=!1,e.loggedIn=!0,e.token=t.payload,e.email=null,e.secret_code=null,e.isAdmin=!1,e.isTwitter=!1,e.isEmail=!0,e.isGuess=!1,e.lastMultipassLogin=null},loginWithEmailFailure:(e,t)=>{e.loggingIn=!1,e.error=t.payload},signupWithMailSuccess:(e,t)=>{e.loggingIn=!1,e.loggedIn=!0,e.token=t.payload,e.email=null,e.secret_code=null,e.isAdmin=!1,e.isTwitter=!1,e.isEmail=!0,e.isGuess=!1},loginAsRequest:e=>{e.loggingIn=!0,e.error=void 0},loginAsSuccess:(e,t)=>{e.loggingIn=!1,e.loggedIn=!0,e.token=t.payload,e.email=null,e.secret_code=null,e.isAdmin=!1,e.isTwitter=!1,e.isEmail=!1,e.isGuess=!1},loginAsFailure:(e,t)=>{e.loggingIn=!1,e.error=t.payload},loginAsGuestRequest:e=>{e.loggingIn=!0,e.error=void 0},loginAsGuestSuccess:(e,t)=>{e.loggingIn=!1,e.loggedIn=!0,e.token=t.payload,e.email=null,e.secret_code=null,e.isAdmin=!1,e.isTwitter=!1,e.isEmail=!1,e.isGuess=!0},loginAsGuestFailure:(e,t)=>{e.loggingIn=!1,e.error=t.payload},logoutRequest:e=>{e.token=null,e.loggingIn=!1,e.loggedIn=!1,e.isAdmin=!1,e.isTwitter=!1,e.isEmail=!1,e.isGuess=!1},loginWithTwitterRequest:e=>{e.loggingIn=!0,e.error=void 0},loginWithTwitterSuccess:(e,t)=>{e.loggingIn=!1,e.loggedIn=!0,e.token=t.payload,e.email=null,e.secret_code=null,e.isAdmin=!1,e.isTwitter=!0,e.isEmail=!1,e.isGuess=!1},loginWithTwitterAborted:e=>{e.loggingIn=!1,e.loggedIn=!1},loginWithTwitterFailure:(e,t)=>{e.loggingIn=!1,e.error=t.payload},signupWithTwitterAndMailSuccess:(e,t)=>{e.loggingIn=!1,e.loggedIn=!0,e.token=t.payload,e.email=null,e.secret_code=null,e.isAdmin=!1,e.isTwitter=!1,e.isEmail=!0,e.isGuess=!1},connectWithTwitterAccountRequest:e=>{e.isTwitter=!0,e.error=void 0},connectWithTwitterAccountSuccess:e=>{e.twitterConnect=!1,e.isTwitter=!0},connectWithTwitterAccountFailure:(e,t)=>{e.twitterConnect=!1,e.error=t.payload},logoutOfTwitterRequest:e=>{e.isTwitter=!0},logoutOfTwitterSuccess:e=>{e.isTwitter=!1},logoutOfTwitterFailure:(e,t)=>{e.error=t.payload},handleSetCurrentTab:(e,t)=>{e.currentTab=t.payload},setDateToken:(e,t)=>{e.lastMultipassLogin=t.payload}}}),{clearAuth:L,setAppVersion:B,createGuestUserRequest:R,createGuestUserSuccess:C,createGuestUserFailure:w,loginWithEmailRequest:E,loginWithEmailSuccess:F,loginWithEmailFailure:Z,signupWithMailSuccess:T,loginAsRequest:A,loginAsSuccess:G,loginAsFailure:q,loginAsGuestRequest:x,loginAsGuestSuccess:M,loginAsGuestFailure:P,loginWithTwitterRequest:N,loginWithTwitterSuccess:D,loginWithTwitterFailure:O,loginWithTwitterAborted:U,signupWithTwitterAndMailSuccess:W,logoutRequest:H,connectWithTwitterAccountRequest:Y,connectWithTwitterAccountSuccess:V,connectWithTwitterAccountFailure:z,logoutOfTwitterRequest:$,logoutOfTwitterSuccess:j,logoutOfTwitterFailure:Q,handleSetCurrentTab:X,setDateToken:J}=I.actions;function K(){return e=>{e(R()),l.Z.createGuestUser().then(async t=>{e(C(t))},t=>{e(w(t.toString()))})}}function ee(e,t,o,s){return a=>{a(E()),l.Z.loginWithEmail(e,t).then(async e=>{a(F(e));let t=await (0,h.bG)(s)(a);o?o(t):"web"!==i.Z.OS?r.Z.emit("Navigation Reset",{routes:[{name:"MainTabContainer"}]}):r.Z.emit("Navigation GoBack",{})},e=>{a(Z(e.toString())),n.Z.sendError(e)})}}function et(){return e=>{l.Z.logout(),e((0,d.LZ)()),e(L()),e((0,u.LL)()),e((0,c.ye)()),e((0,g.Nb)()),e((0,p.uB)()),e((0,m.jX)()),e((0,f.JU)()),e((0,y.AQ)()),e((0,k.rL)()),e((0,a.HV)()),e((0,v.sR)()),e((0,b.m8)()),e((0,h.pn)()),e((0,_.Jj)()),e((0,h.Q7)()),"web"===i.Z.OS&&e((0,S.So)())}}function eo(){return e=>{e($()),l.Z.disconnectWithTwitter().then(()=>{e(j()),e((0,h.py)(!1))},t=>{e(Q(t.toString())),n.Z.sendError(t)})}}t.ZP=I.reducer},61028:function(e,t,o){o.d(t,{B0:function(){return I},Ck:function(){return d},EA:function(){return b},FC:function(){return m},I4:function(){return F},NI:function(){return S},R2:function(){return p},So:function(){return h},aP:function(){return _},bu:function(){return C},fK:function(){return E},ge:function(){return c},ix:function(){return w},kb:function(){return u},lA:function(){return L},s8:function(){return a},so:function(){return k},w$:function(){return B},wt:function(){return f}});var i=o(29829),s=o(28707),n=o(28342);let l={groupSelectedSuccess:[],selectedBookState:s.ps,triesRemaining:s.oJ,startGame:!1,gameConnection:null,isLoading:!0,isGameFinished:!1,showShareYourResults:!1,historyUserTries:[],helpModal:!1,isSuccessfulSubmitted:null,lastGameBooks:[],discountCode:"",dateNextGame:null,sendFeedbackModal:!1,bookInGameModal:!1,leaderBoardModal:!1,redeemDiscountModal:!1,isGoBack:!1},r=(0,i.oM)({name:"bookConnectionGame",initialState:l,reducers:{resetGameConnection:(e,t)=>({...l,gameConnection:t.payload}),setResetGame:()=>({...l}),userStartGame:(e,t)=>{e.startGame=t.payload},setIsSuccessfulSubmitted:(e,t)=>{e.isSuccessfulSubmitted=t.payload},selectedBook:(e,t)=>{e.selectedBookState=t.payload},resetTriesRemaining:e=>{e.triesRemaining=s.cM},setGameConnection:(e,t)=>{e.gameConnection=t.payload},userUseATryRemaining:e=>{e.triesRemaining<=1?(e.triesRemaining=0,e.selectedBookState=s.ps,e.showShareYourResults=!0):e.triesRemaining-=1},setGroupSelectedSuccess:(e,t)=>{var o,i;t.payload.length===(null===(i=e.gameConnection)||void 0===i?void 0:null===(o=i.winning_connections)||void 0===o?void 0:o.length)&&(e.showShareYourResults=!0),e.groupSelectedSuccess=t.payload},setIsLoading:(e,t)=>{e.isLoading=t.payload},setIsGameFinished:(e,t)=>{e.isGameFinished=t.payload},setShowShareYourResults:(e,t)=>{e.showShareYourResults=t.payload},setShuffleGame:e=>{var t;e.gameConnection={...e.gameConnection,first_shuffle:(0,n.Sy)((null===(t=e.gameConnection)||void 0===t?void 0:t.first_shuffle)||[])}},setHistoryUserTries:(e,t)=>{e.historyUserTries=t.payload},setHelpModal:(e,t)=>{e.helpModal=t.payload},setLastGameBooks:(e,t)=>{e.lastGameBooks=t.payload.slice(0,3)},setDiscountCode:(e,t)=>{e.discountCode=t.payload},setDateNextGame:(e,t)=>{e.dateNextGame=t.payload},setLeaderBoardModal:(e,t)=>{e.leaderBoardModal=t.payload},setBookInGameModal:(e,t)=>{e.bookInGameModal=t.payload},setSendFeedbackModal:(e,t)=>{e.sendFeedbackModal=t.payload},setRedeemDiscountModal:(e,t)=>{e.redeemDiscountModal=t.payload},setIsGoBack:(e,t)=>{e.isGoBack=t.payload}}}),{userStartGame:a,resetGameConnection:d,selectedBook:u,userUseATryRemaining:c,resetTriesRemaining:g,setGameConnection:p,setGroupSelectedSuccess:m,setIsLoading:f,setIsGameFinished:k,setShowShareYourResults:y,setShuffleGame:v,setHistoryUserTries:b,setHelpModal:_,setResetGame:h,setIsSuccessfulSubmitted:S,setLastGameBooks:I,setDiscountCode:L,setDateNextGame:B,setSendFeedbackModal:R,setBookInGameModal:C,setLeaderBoardModal:w,setRedeemDiscountModal:E,setIsGoBack:F}=r.actions;t.ZP=r.reducer},65319:function(e,t,o){o.d(t,{AL:function(){return L},Hk:function(){return h},K1:function(){return S},LL:function(){return k},VF:function(){return B},bq:function(){return w},dn:function(){return R},p8:function(){return E},x:function(){return I}});var i=o(48764),s=o(29829),n=o(51023),l=o(89877),r=o(91960),a=o(79045),d=o(37426),u=o(4400),c=o(20406),g=o(26035),p=o(25467);let m=(0,s.oM)({name:"cart",initialState:{loading:!1,orders:[],checkout:void 0,subscription:void 0,affiliate:void 0,initial_url_params:[]},reducers:{syncFromStorage:(e,t)=>{let{orders:o,subscription:i,affiliate:s,initial_url_params:n}=t.payload;e.orders=o||[],e.subscription=i,e.affiliate=s,e.initial_url_params=n||[]},clearCart:e=>{e.loading=!1,e.orders=[],e.checkout=void 0,e.subscription=void 0},clearCartParams:e=>{e.affiliate=void 0},createCheckoutRequest:e=>{e.loading=!0},createCheckoutSuccess:(e,t)=>{let o=t.payload;e.checkout=o,e.loading=!1},createCheckoutFailure:(e,t)=>{let{error:o}=t.payload;e.loading=!1,e.error_message=o},addOrderToCart:(e,t)=>{let{orderId:o,product:i,lineItem:s,type:n,amount:l,quantity:r,attributes:a}=t.payload,d=e.orders.findIndex(e=>e.id===o);d<0?e.orders.push({product:i,lineItem:s,quantity:null!=r?r:1,type:n,id:o,amount:l,attributes:a}):r?e.orders[d].quantity=r:e.orders[d].quantity=Number(e.orders[d].quantity)+1,e.loading=!1},removeOrderFromCart:(e,t)=>{let{orderId:o}=t.payload,i=e.orders.findIndex(e=>e.id===o);i>-1&&e.orders.splice(i,1),e.loading=!1},changeQuantity:(e,t)=>{let{orderId:o,quantity:i}=t.payload,s=e.orders.findIndex(e=>e.id===o);s>=0&&(e.orders[s].quantity=i),e.loading=!1},removeSubscription:e=>{e.subscription=void 0},addSubscription:(e,t)=>{let o=t.payload;e.subscription=o},setCartParams:(e,t)=>{let o=t.payload;if(e.affiliate||(e.affiliate={affiliate_id:void 0,partner:void 0,referrer_code:void 0,referrer_id:void 0}),o){let t=new Date(new Date().getTime()+864e5).toISOString();if(o.affiliate||o.affiliate_id){var i;e.affiliate.affiliate_id={value:null!==(i=o.affiliate)&&void 0!==i?i:o.affiliate_id,expiration:t}}o.referrer_id&&(e.affiliate.referrer_id={value:o.referrer_id,expiration:t}),o.referrer_code&&(e.affiliate.referrer_code={value:o.referrer_code,expiration:t}),o.partner&&(e.affiliate.partner={value:o.partner,expiration:t})}},setInitialUrlParams:(e,t)=>{let{params:o}=t.payload;e.initial_url_params=o}}}),{syncFromStorage:f,clearCart:k,clearCartParams:y,createCheckoutRequest:v,createCheckoutSuccess:b,createCheckoutFailure:_,addOrderToCart:h,removeOrderFromCart:S,changeQuantity:I,removeSubscription:L,addSubscription:B,setCartParams:R,setInitialUrlParams:C}=m.actions;function w(e,t,o,s){return async(m,f)=>{try{await (0,c.y)(async()=>{let r,c;m(v());let{orders:g,affiliate:k}=f().cart,_=g.map(e=>{var t,o;return"giftcard"===e.type?e.lineItem:{merchandiseId:"gid://shopify/ProductVariant/".concat(null===(o=e.product)||void 0===o?void 0:null===(t=o.ecommerce)||void 0===t?void 0:t.variant_id),quantity:Number(e.quantity),attributes:e.attributes}}),h=f().cart.subscription;if(h){let e="gid://shopify/ProductVariant/".concat(h.variant_id),t="gid://shopify/SellingPlan/".concat(h.selling_plan_id);_.push({merchandiseId:e,quantity:1,sellingPlanId:t})}if(e){let e=await d.Z.getMultipassToken(void 0,o);c=(await d.Z.customerAccessTokenCreateWithMultipass(e)).accessToken}let S="";if(s){let{utm_source:e,utm_medium:t,utm_campaign:o}=s,i=[];e&&i.push("utm_source=".concat(e)),t&&i.push("utm_medium=".concat(t)),o&&i.push("utm_campaign=".concat(o)),S=i.length>0?"".concat(i.join("&")):""}let I=_.reverse(),L=await d.Z.createACart(I,k,c,t),B=i.lW.from(L.id,"base64").toString("utf-8"),R=(0,p.ip)(L.id);R&&(0,p.Mu)(R);let C="".concat(L.checkoutUrl).concat(-1!==L.checkoutUrl.indexOf("?")?"&":"?").concat(S),w=C;if(e){r=await d.Z.getMultipassTokenPost(C,o);let e="production"===l.bw?n.Z.SHOPIFY_STORE_URL_PRODUCTION:n.Z.SHOPIFY_STORE_URL_STAGING;w="".concat(e,"/account/login/multipass/").concat(r)}m(b({id:B,webUrl:C})),m(y()),m((0,u.uB)()),a.Z.emit("Navigation Push",{name:"Checkout",params:{uri:w}})},g.X8)}catch(e){m(_(e.toString())),r.Z.logErrorInServer(e,"Error creating Checkout")}}}function E(){return async e=>{try{let t=(0,p.QC)();if(t){let o=await d.Z.getCheckoutByCartToken(t);return!0===o&&(e(k()),(0,p.FF)()),o}}catch(e){console.error("Error checking cart status:",e)}}}t.ZP=m.reducer},39330:function(e,t,o){o.d(t,{B$:function(){return ed},C$:function(){return eu},Cm:function(){return ea},FD:function(){return ec},Il:function(){return eg},_X:function(){return u},cu:function(){return ep},dy:function(){return em},oB:function(){return er},pR:function(){return ey},sb:function(){return ek},uw:function(){return ev},ye:function(){return f},yz:function(){return ef}});var i=o(29829),s=o(12902),n=o(39149),l=o(26035),r=o(19172),a=o(91960),d=o(47281);let u={size:l.Hj,number:-1,total_pages:-1,loading:!1,content:[]},c={loading:!1,error_message:"",lists:[],defaultLists:[],page:-1,shared:{loading:!1,products:[],page_number:-1,total_pages:-1},customListsByBookId:{},hasChange:!1},g=e=>{var t;return null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null==e?void 0:e.book_id},p=(e,t)=>{let o=t.filter(t=>!e.find(e=>e.id===t.id));return e.concat(o)},m=(0,i.oM)({name:"customList",initialState:c,reducers:{clearCustomLists:()=>c,removeList:(e,t)=>{e.lists=e.lists.filter(e=>e.id!==t.payload.listId)},getDefaultListsRequest:e=>{e.loading=!0,e.error_message=""},getDefaultListsSuccess:(e,t)=>{let o=t.payload.response,i=[],s=o.find(e=>e.title===n.sY.TO_BE_READ),l=o.find(e=>e.title===n.sY.READING),r=o.find(e=>e.title===n.sY.FINISHED);s&&i.push(s),l&&i.push(l),r&&i.push(r),e.defaultLists=i,e.loading=!1},getDefaultListsFailure:(e,t)=>{e.loading=!1,e.error_message=t.payload},getCustomListsRequest:e=>{e.loading=!0,e.error_message=""},getCustomListsSuccess:(e,t)=>{let{response:o,page:i}=t.payload,{first:s,content:l}=o;if(e.loading=!1,s){let t=[],o=l.find(e=>e.title===n.sY.TO_BE_READ),i=l.find(e=>e.title===n.sY.READING),s=l.find(e=>e.title===n.sY.FINISHED);o&&t.push(o),i&&t.push(i),s&&t.push(s),e.defaultLists=t,e.lists=p(e.lists,l)}else i>e.page&&e.lists.push(...l);e.page=i},getCustomListsFailure:(e,t)=>{e.loading=!1,e.error_message=t.payload},clearCustomListById:(e,t)=>{var o;let{listId:i}=t.payload,s=e.lists.findIndex(e=>e.id===i);(null===(o=e.lists[s])||void 0===o?void 0:o.books)&&(e.lists[s].books=u)},getCustomListsByIdRequest:(e,t)=>{let{listId:o}=t.payload,i=e.lists.findIndex(e=>e.id===o);if(i>=0){var n,l;(null===(n=e.lists[i])||void 0===n?void 0:n.books)||(e.lists[i].books=u),e.lists[i]=(0,s.ZP)(null!==(l=e.lists[i])&&void 0!==l?l:u,e=>{e.books.loading=!0})}},getCustomListsByIdSuccess:(e,t)=>{var o,i,s,n;let{listId:l,response:r}=t.payload,a=null!==(s=r.id)&&void 0!==s?s:l,d=e.lists.findIndex(e=>e.id===a),{content:c,total_pages:g,number:p,first:m,last:f}=null!==(n=r.books)&&void 0!==n?n:u;if(m||d<0)d<0?e.lists.push(r):e.lists[d]=r;else if(p>(null===(i=e.lists[d])||void 0===i?void 0:null===(o=i.books)||void 0===o?void 0:o.number)){e.lists[d].books.number=p,e.lists[d].books.total_pages=g,e.lists[d].books.last=f;let t=c.filter(t=>!e.lists[d].books.content.find(e=>e===t));e.lists[d].books.content=[...e.lists[d].books.content,...t],e.lists[d].books.loading=!1}},getCustomListsByIdFailure:(e,t)=>{var o;let{listId:i,error:s}=t.payload,n=e.lists.findIndex(e=>e.id===i);(null===(o=e.lists[n])||void 0===o?void 0:o.books)&&(e.lists[n].books.loading=!1,e.lists[n].books.error=s)},getSharedProductsRequest:e=>{e.shared.loading=!0},getSharedProductsSuccess:(e,t)=>{let{response:o}=t.payload;e.shared.loading=!1;let{pageable:i={page_number:0},total_pages:s=1,content:n=o,first:l}=o;if(l)e.shared.products=n;else if(i.page_number>e.shared.page_number){var r;e.shared.page_number=i.page_number,e.shared.total_pages=s;let t=n.filter(t=>{var o;return!(null===(o=e.shared)||void 0===o?void 0:o.products.find(e=>e.id===t.id))});e.shared.products=null===(r=e.shared)||void 0===r?void 0:r.products.concat(t)}},getSharedProductsFailure:(e,t)=>{let{error:o}=t.payload;e.shared.loading=!1,e.error_message=o},postBookToListRequest:(e,t)=>{var o;let{listId:i}=t.payload;e.loading=!0;let n=e.lists.findIndex(e=>e.id===i);e.lists[n]=(0,s.ZP)(null!==(o=e.lists[n])&&void 0!==o?o:{...r.kG,id:i},e=>{e.books||(e.books=u),e.books.loading=!0})},postBookToListSuccess:(e,t)=>{let{book:o,listId:i}=t.payload;e.loading=!1;let n=e.lists.findIndex(e=>e.id===i),l=e.lists[n];if(n>-1){let t=(0,s.ZP)(null!=l?l:{...r.kG,id:i},e=>{var t,i,s,n,l;e.books.loading=!1,(null===(t=e.books)||void 0===t?void 0:t.content.find(e=>e.id===o))||(e.books&&(e.books.content=[o,...(null===(s=e.books)||void 0===s?void 0:s.content)||[]]),null===(i=e.last_books)||void 0===i||i.unshift(o),e.book_count=(null!==(n=null==e?void 0:e.book_count)&&void 0!==n?n:0)+1,e.books&&(e.books.totalElements=(null!==(l=e.books.totalElements)&&void 0!==l?l:0)+1))}),n=e.lists.map(e=>e.id===i?t:e);e.lists=n}e.customListsByBookId&&e.customListsByBookId[o.id]?e.customListsByBookId[o.id]=[...e.customListsByBookId[o.id],{book_id:o.id,custom_list_id:l.id,title:l.title}]:e.customListsByBookId={...e.customListsByBookId,[o.id]:(0,s.ZP)([],e=>{e.push({book_id:o.id,custom_list_id:l.id,title:l.title})})},e.hasChange=!0},postBookToListFailure:(e,t)=>{var o;let{listId:i}=t.payload;e.loading=!1;let n=e.lists.findIndex(e=>e.id===i);e.lists[n]=(0,s.ZP)(null!==(o=e.lists[n])&&void 0!==o?o:{...r.kG,id:i},e=>{e.books.loading=!1})},moveBookToListRequest:(e,t)=>{var o,i;let{fromListId:n,toListId:l}=t.payload;e.loading=!0;let a=e.lists.findIndex(e=>e.id===l);e.lists[a]=(0,s.ZP)(null!==(o=e.lists[a])&&void 0!==o?o:{...r.kG,id:a},e=>{e.books||(e.books=u),e.books.loading=!0});let d=e.lists.findIndex(e=>e.id===n);e.lists[d]=(0,s.ZP)(null!==(i=e.lists[d])&&void 0!==i?i:{...r.kG,id:d},e=>{e.books||(e.books=u),e.books.loading=!0})},moveBookToListSuccess:(e,t)=>{var o,i,s,n,l,r,a;let{book:d,fromListId:u,toListId:c}=t.payload;e.loading=!1;let p=e.lists.find(e=>e.id===u),m=e.lists.find(e=>e.id===c);if(null==p?void 0:p.books){let e=p.books.content.findIndex(e=>g(e)===g(d));e>-1&&p.books.content.splice(e,1)}if(null==p?void 0:p.last_books){let e=p.last_books.findIndex(e=>g(e)===g(d));e>-1&&p.last_books.splice(e,1)}null==m||null===(o=m.books)||void 0===o||o.content.unshift(d),null==m||null===(i=m.last_books)||void 0===i||i.unshift(d),p&&(p.book_count=(null!==(s=p.book_count)&&void 0!==s?s:1)-1,p.books&&(p.books.totalElements=(null!==(n=p.books.totalElements)&&void 0!==n?n:0)-1)),m&&(m.book_count=(null!==(l=m.book_count)&&void 0!==l?l:0)+1,m.books&&(m.books.totalElements=(null!==(r=m.books.totalElements)&&void 0!==r?r:0)+1)),(null==p?void 0:p.books)&&(p.books.loading=!1),(null==m?void 0:m.books)&&(m.books.loading=!1);let f=[...null!==(a=e.customListsByBookId[d.id])&&void 0!==a?a:[]],k=f.findIndex(e=>e.custom_list_id===(null==p?void 0:p.id));k>-1&&f.splice(k,1),m&&f.unshift({book_id:d.id,custom_list_id:m.id,title:m.title}),e.customListsByBookId[d.id]=f},moveBookToListFailure:(e,t)=>{let{error:o,fromListId:i,toListId:s}=t.payload;e.loading=!1;let n=e.lists.find(e=>e.id===i),l=e.lists.find(e=>e.id===s);(null==n?void 0:n.books)&&(n.books.loading=!1),(null==l?void 0:l.books)&&(l.books.loading=!1),e.error_message=o},deleteBookFromListRequest:(e,t)=>{let{listId:o}=t.payload,i=e.lists.find(e=>e.id===o);e.loading=!0,(null==i?void 0:i.books)&&(i.books.loading=!0)},deleteBookFromListSuccess:(e,t)=>{var o,i,s;let{book:n,listId:l}=t.payload;e.loading=!1;let r=e.lists.find(e=>e.id===l);if(null==r?void 0:r.books){let e=r.books.content.findIndex(e=>g(e)===g(n));e>-1&&r.books.content.splice(e,1)}if(null==r?void 0:r.last_books){let e=r.last_books.findIndex(e=>g(e)===g(n));e>-1&&r.last_books.splice(e,1)}r&&(r.book_count=(null!==(o=r.book_count)&&void 0!==o?o:1)-1,r.books&&(r.books.totalElements=(null!==(i=r.books.totalElements)&&void 0!==i?i:1)-1)),(null==r?void 0:r.books)&&(r.books.loading=!1);let a=[...null!==(s=e.customListsByBookId[n.id])&&void 0!==s?s:[]],d=a.findIndex(e=>e.custom_list_id===(null==r?void 0:r.id));d>-1&&a.splice(d,1),n.id&&(e.customListsByBookId[n.id]=a)},deleteBookFromListFailure:(e,t)=>{let{error:o,listId:i}=t.payload,s=e.lists.find(e=>e.id===i);e.loading=!1,(null==s?void 0:s.books)&&(s.books.loading=!1),e.error_message=o},postBookToSharedRequest:e=>{e.loading=!0},postBookToSharedSuccess:(e,t)=>{let{book:o}=t.payload;e.shared.products.unshift(o),e.loading=!1},postBookToSharedFailure:(e,t)=>{let{error:o}=t.payload;e.loading=!1,e.error_message=o},postBookRecommendationRequest:e=>{e.loading=!0},postBookRecommendationSuccess:e=>{e.loading=!1},postBookRecommendationFailure:(e,t)=>{let{error:o}=t.payload;e.loading=!1,e.error_message=o},updateCustomListVisibilityRequest:(e,t)=>{let{listId:o}=t.payload;e.loading=!0;let i=e.lists.findIndex(e=>e.id===o);if(e.lists[i]){var s;(null===(s=e.lists[i])||void 0===s?void 0:s.books)||(e.lists[i].books=u),e.lists[i].books.loading=!0}},updateCustomListVisibilitySuccess:(e,t)=>{var o;let{listId:i,visibility:s}=t.payload;e.loading=!1;let n=e.lists.findIndex(e=>e.id===i);e.lists[n]&&(e.lists[n].visibility=s),(null===(o=e.lists[n])||void 0===o?void 0:o.books)&&(e.lists[n].books.loading=!1)},updateCustomListVisibilityFailure:(e,t)=>{var o;let{listId:i,error:s}=t.payload;e.loading=!1;let n=e.lists.findIndex(e=>e.id===i);(null===(o=e.lists[n])||void 0===o?void 0:o.books)&&(e.lists[n].books.loading=!1,e.lists[n].books.error=s)},createCustomListRequest:e=>{e.loading=!0},createCustomListSuccess:(e,t)=>{let{response:o}=t.payload;e.lists.unshift(o),e.loading=!1},createCustomListFailure:(e,t)=>{let{error:o}=t.payload;e.error_message=o,e.loading=!1},editCustomListRequest:e=>{e.loading=!0},editCustomListSuccess:(e,t)=>{let{response:o,listId:i}=t.payload,s=e.lists.findIndex(e=>e.id===i);e.lists[s]&&(e.lists[s].title=o.title,e.lists[s].description=o.description,e.lists[s].visibility=o.visibility),e.hasChange=!0,e.loading=!1},editCustomListFailure:(e,t)=>{let{error:o}=t.payload;e.error_message=o,e.loading=!1},getCustomListsByBookIdRequest:(e,t)=>{let{bookId:o}=t.payload;e.customListsByBookId&&!e.customListsByBookId[o]&&(e.customListsByBookId[o]=[])},getCustomListsByBookIdSuccess:(e,t)=>{let{bookId:o,response:i}=t.payload;e.customListsByBookId&&!e.customListsByBookId[o]?e.customListsByBookId={...e.customListsByBookId,bookId:i}:e.customListsByBookId&&(e.customListsByBookId[o]=i)},getCustomListsByBookIdFailure:()=>{},clearCustomListsByBookId:e=>{e.customListsByBookId={}},editListBookNotesRequest:e=>{e.loading=!0},editListBookNotesSuccess:(e,t)=>{let{response:o,listId:i,bookId:s}=t.payload,n=e.lists.findIndex(e=>e.id===i);if(-1!==n&&e.lists[n]){var l,r;let t=null===(l=e.lists[n].books)||void 0===l?void 0:l.content.find(e=>e.id===s),i=null===(r=o.books)||void 0===r?void 0:r.content.find(e=>e.id===s);t&&i&&(t.note=i.note)}e.loading=!1},editListBookNotesFailure:(e,t)=>{let{error:o}=t.payload;e.error_message=o,e.loading=!1},resetHasChange:e=>{e.hasChange=!1}}}),{clearCustomLists:f,getDefaultListsRequest:k,getDefaultListsSuccess:y,getDefaultListsFailure:v,getCustomListsRequest:b,getCustomListsSuccess:_,getCustomListsFailure:h,clearCustomListById:S,getCustomListsByIdRequest:I,getCustomListsByIdSuccess:L,getCustomListsByIdFailure:B,getSharedProductsRequest:R,getSharedProductsSuccess:C,getSharedProductsFailure:w,postBookToListRequest:E,postBookToListSuccess:F,postBookToListFailure:Z,moveBookToListRequest:T,moveBookToListSuccess:A,moveBookToListFailure:G,deleteBookFromListRequest:q,deleteBookFromListSuccess:x,deleteBookFromListFailure:M,postBookToSharedRequest:P,postBookToSharedSuccess:N,postBookToSharedFailure:D,postBookRecommendationRequest:O,postBookRecommendationSuccess:U,postBookRecommendationFailure:W,updateCustomListVisibilityRequest:H,updateCustomListVisibilitySuccess:Y,updateCustomListVisibilityFailure:V,createCustomListRequest:z,createCustomListSuccess:$,createCustomListFailure:j,editCustomListRequest:Q,editCustomListSuccess:X,editCustomListFailure:J,getCustomListsByBookIdRequest:K,getCustomListsByBookIdSuccess:ee,getCustomListsByBookIdFailure:et,clearCustomListsByBookId:eo,removeList:ei,editListBookNotesRequest:es,editListBookNotesSuccess:en,editListBookNotesFailure:el,resetHasChange:er}=m.actions;function ea(){return(e,t)=>{let{loggedIn:o}=t().auth;if(o)return e(k()),d.Z.getDefaultLists().then(t=>{e(y({response:t}))},t=>{e(v({error:t.toString()})),a.Z.sendError(t)})}}function ed(e,t){return(o,i)=>{let{loggedIn:s}=i().auth;if(s)return o(b()),d.Z.getCustomLists(e,t).then(t=>{o(_({response:t,page:e}))},e=>{o(h({error:e.toString()})),a.Z.sendError(e)})}}function eu(e,t,o){return i=>(i(I({listId:e})),d.Z.getCustomListsById(e,t,o).then(async t=>{await i(L({response:t,listId:e}))},t=>{i(B({listId:e,error:t.toString()})),a.Z.sendError(t)}))}function ec(e,t){return async o=>(o(E({listId:t})),d.Z.addBookToCustomList(g(e),t).then(()=>{o(F({book:e,listId:t}))},e=>{o(Z({listId:t,error:e.toString()})),a.Z.sendError(e)}))}function eg(e,t,o){return i=>(i(T({fromListId:t,toListId:o})),d.Z.moveBookToCustomList(g(e),t,o).then(()=>{i(A({book:e,fromListId:t,toListId:o}))},e=>{i(G({listId:o,error:e.toString()})),a.Z.sendError(e)}))}function ep(e,t){return o=>(o(q({listId:t})),d.Z.deleteBookFromCustomList(g(e),t).then(()=>{o(x({book:e,listId:t}))},e=>{o(M({listId:t,error:e.toString()})),a.Z.sendError(e)}))}function em(e,t,o){return i=>(i(P()),d.Z.postBookToShared(g(e),t,o).then(()=>{i(N({book:{...e,shared_at:new Date().toISOString()}}))},e=>{i(D({error:e.toString()})),a.Z.sendError(e)}))}function ef(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHARED";return o=>(o(H({listId:e})),d.Z.updateCustomListVisibility(e,t).then(()=>{o(Y({listId:e,visibility:t}))},t=>{o(V({listId:e,error:t.toString()})),a.Z.sendError(t)}))}function ek(e){return t=>(t(z()),d.Z.createCustomList(e).then(e=>(t($({response:e})),e),e=>(t(j({error:e.toString()})),a.Z.sendError(e),e)))}function ey(e,t){return o=>(o(Q()),d.Z.updateCustomList(e,t).then(t=>{o(X({response:t,listId:e}))},e=>{o(J({error:e.toString()})),a.Z.sendError(e)}))}function ev(e,t,o){return i=>(i(es()),d.Z.updateListBookNotes(e,t,o).then(o=>{i(en({response:o,listId:e,bookId:t}))},e=>{i(el({error:e.toString()})),a.Z.sendError(e)}))}t.ZP=m.reducer},86491:function(e,t,o){var i=o(29829);o(16005);let s={content:[],editorialListsStatic:[],editorialListsRelated:{},loadingRelated:!1,loading:!1,size:8,page_number:-1,total_pages:0,number_of_elements:0,lastPage:!1},n=(0,i.oM)({name:"editorialListStore",initialState:s,reducers:{clearEditorialList:()=>s,initialEditorialLists:e=>{e.loading=!1,e.error_message="",e.page_number=-1,e.lastPage=!1,e.content=[],e.editorialListsStatic=[]},firstFetchEditorialLists:(e,t)=>{let{lastItem:o,content:i}=t.payload;e.page_number=0,e.content=i,e.lastPage=o,e.size=(null==i?void 0:i.length)||0},getEditorialRequest:e=>{e.loading=!0,e.error_message=""},getEditorialSuccess:(e,t)=>{let{response:o}=t.payload;e.page_number!==o.pageable.page_number&&(e.page_number=o.pageable.page_number,e.total_pages=o.pageable.page_size,e.number_of_elements=o.number_of_elements,e.lastPage=o.last,e.content=[...e.content,...o.content],e.loading=!1,e.size=e.content.length)},getEditorialFailure:(e,t)=>{e.loading=!1,e.error_message=t.payload},getEditorialStaticRequest:e=>{e.loading=!0,e.error_message=""},getEditorialStaticSuccess:(e,t)=>{let{response:o}=t.payload;e.editorialListsStatic=o.content},getEditorialStaticFailure:(e,t)=>{e.loading=!1,e.error_message=t.payload},resetEditorialRelated:e=>{e.editorialListsRelated={}},getEditorialRelatedRequest:e=>{e.loadingRelated=!0,e.error_message=""},getEditorialRelatedSuccess:(e,t)=>{let{response:o}=t.payload;e.editorialListsRelated={...e.editorialListsRelated,...o,content:[...e.editorialListsRelated.content?e.editorialListsRelated.content:[],...o.content]},e.loadingRelated=!1},getEditorialRelatedFailure:(e,t)=>{e.loadingRelated=!1,e.error_message=t.payload}}}),{clearEditorialList:l,getEditorialRequest:r,getEditorialSuccess:a,getEditorialFailure:d,initialEditorialLists:u,getEditorialStaticRequest:c,getEditorialStaticSuccess:g,getEditorialStaticFailure:p,getEditorialRelatedRequest:m,getEditorialRelatedSuccess:f,getEditorialRelatedFailure:k,firstFetchEditorialLists:y,resetEditorialRelated:v}=n.actions;t.ZP=n.reducer},27597:function(e,t,o){o.d(t,{Nb:function(){return l}});var i=o(29829);o(91960),o(43188);let s={size:12,page_number:-1,total_pages:-1,loading:!1,mentions:[]},n=(0,i.oM)({name:"following",initialState:s,reducers:{clearFollowing:()=>s,clearFollowingMentions:e=>{e.page_number=-1,e.total_pages=-1,e.loading=!1,e.mentions=[]},getFollowingMentionsRequest:e=>{e.loading=!0},getFollowingMentionsSuccess:(e,t)=>{e.loading=!1;let{pageable:o,total_pages:i,content:s}=t.payload;if(o.page_number>e.page_number){e.page_number=o.page_number,e.total_pages=i;let t=s.filter(t=>!e.mentions.find(e=>e.mention_id===t.mention_id));e.mentions=e.mentions.concat(t)}},getFollowingMentionsFailure:(e,t)=>{e.loading=!1,e.error_message=t.payload}}}),{clearFollowing:l,clearFollowingMentions:r,getFollowingMentionsRequest:a,getFollowingMentionsSuccess:d,getFollowingMentionsFailure:u}=n.actions;t.ZP=n.reducer}}]);